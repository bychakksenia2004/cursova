{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/magistrature/Dockerwork/kursova/app/components/TopLeftHome.tsx"],"sourcesContent":["\"use client\";\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport default function TopLeftHome() {\r\n  const pathname = usePathname();\r\n  if (!pathname || pathname === \"/\") return null;\r\n\r\n  return (\r\n    <div className=\"top-left-home\">\r\n        <Link href=\"/\" className=\"btn btn-outline-secondary\">Головна сторінка</Link>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS;IACtB,MAAM,WAAW,IAAA,iJAAW;IAC5B,IAAI,CAAC,YAAY,aAAa,KAAK,OAAO;IAE1C,qBACE,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC,uKAAI;YAAC,MAAK;YAAI,WAAU;sBAA4B;;;;;;;;;;;AAG7D"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///D:/magistrature/Dockerwork/kursova/app/components/TopRightUser.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function TopRightUser() {\r\n  const [user, setUser] = useState<{ username: string } | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    async function load() {\r\n      try {\r\n        const res = await fetch(\"/api/me\", { credentials: \"include\" });\r\n        if (!mounted) return;\r\n        if (!res.ok) {\r\n          setUser(null);\r\n        } else {\r\n          const data = await res.json();\r\n          setUser(data?.user ?? null);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"TopRightUser fetch /api/me error:\", err);\r\n        setUser(null);\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    }\r\n\r\n    load();\r\n\r\n    const onAuthRefresh = () => {\r\n      // re-check auth when sign in/out happens in same tab\r\n      load();\r\n    };\r\n\r\n    const onStorage = (e: StorageEvent) => {\r\n      if (e.key === \"auth-refresh\") load();\r\n    };\r\n\r\n    window.addEventListener(\"auth-refresh\", onAuthRefresh);\r\n    window.addEventListener(\"storage\", onStorage);\r\n\r\n    return () => {\r\n      mounted = false;\r\n      window.removeEventListener(\"auth-refresh\", onAuthRefresh);\r\n      window.removeEventListener(\"storage\", onStorage);\r\n    };\r\n  }, []);\r\n\r\n  if (loading) return null;\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <Link href=\"/profile\">\r\n      <button className=\"top-right-user btn btn-secondary\" title={user.username}>Привіт, {user.username}</button>\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAA8B;IAC9D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU;QAEd,eAAe;YACb,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,WAAW;oBAAE,aAAa;gBAAU;gBAC5D,IAAI,CAAC,SAAS;gBACd,IAAI,CAAC,IAAI,EAAE,EAAE;oBACX,QAAQ;gBACV,OAAO;oBACL,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,QAAQ,MAAM,QAAQ;gBACxB;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,qCAAqC;gBACnD,QAAQ;YACV,SAAU;gBACR,IAAI,SAAS,WAAW;YAC1B;QACF;QAEA;QAEA,MAAM,gBAAgB;YACpB,qDAAqD;YACrD;QACF;QAEA,MAAM,YAAY,CAAC;YACjB,IAAI,EAAE,GAAG,KAAK,gBAAgB;QAChC;QAEA,OAAO,gBAAgB,CAAC,gBAAgB;QACxC,OAAO,gBAAgB,CAAC,WAAW;QAEnC,OAAO;YACL,UAAU;YACV,OAAO,mBAAmB,CAAC,gBAAgB;YAC3C,OAAO,mBAAmB,CAAC,WAAW;QACxC;IACF,GAAG,EAAE;IAEL,IAAI,SAAS,OAAO;IACpB,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,8OAAC,uKAAI;QAAC,MAAK;kBACT,cAAA,8OAAC;YAAO,WAAU;YAAmC,OAAO,KAAK,QAAQ;;gBAAE;gBAAS,KAAK,QAAQ;;;;;;;;;;;;AAGvG"}}]
}