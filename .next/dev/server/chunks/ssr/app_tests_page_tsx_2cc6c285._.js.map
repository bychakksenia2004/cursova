{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/magistrature/Dockerwork/kursova/app/tests/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function PublicTestsPage() {\r\n  const [tests, setTests] = useState<Array<{ _id: string; title: string; description?: string | null; author?: string | null; storeResponses?: boolean }>>([]);\r\n  const [query, setQuery] = useState<string>(\"\");\r\n  const [authorQuery, setAuthorQuery] = useState<string>(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [page, setPage] = useState<number>(1);\r\n  const [totalPages, setTotalPages] = useState<number>(1);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      try {\r\n        const res = await fetch(`/api/public-tests?page=${page}&limit=10`, { cache: \"no-store\" });\r\n        if (!res.ok) {\r\n          console.warn(\"Failed to load public tests\", await res.text());\r\n          return;\r\n        }\r\n        const data = await res.json();\r\n        if (mounted && data?.ok && Array.isArray(data.tests)) {\r\n          setTests(data.tests);\r\n          setTotalPages(data.totalPages || 1);\r\n        }\r\n      } catch (err) {\r\n        console.warn(\"Failed to load public tests:\", err);\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, [page]);\r\n\r\n  useEffect(() => {\r\n    try { document.title = \"TestHub | Публічні тести\"; } catch {}\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container d-flex flex-column align-items-center justify-content-center min-vh-100\">\r\n      <h2 className=\"mb-4 text-center\">Публічні тести</h2>\r\n      <div className=\"menu-box d-flex flex-column gap-2\">\r\n        <div>\r\n          <input className=\"form-control mb-2\" placeholder=\"Пошук за назвою тесту...\" value={query} onChange={(e) => { setQuery(e.target.value); setPage(1); }} />\r\n          <input className=\"form-control\" placeholder=\"Пошук за автором...\" value={authorQuery} onChange={(e) => { setAuthorQuery(e.target.value); setPage(1); }} />\r\n        </div>\r\n        {loading ? (\r\n          <div className=\"text-muted\">Завантаження...</div>\r\n          ) : tests.length === 0 ? (\r\n          <div className=\"text-muted\">Публічних тестів не знайдено.</div>\r\n          ) : (\r\n          <div className=\"list-group transparent-list\">\r\n              {tests.filter((t) => t.title.toLowerCase().includes(query.toLowerCase()) && (authorQuery ? (t.author || \"\").toLowerCase().includes(authorQuery.toLowerCase()) : true)).map((t) => (\r\n              <div key={t._id} className=\"list-group-item d-flex justify-content-between align-items-start\">\r\n                <div>\r\n                  <div className=\"fw-semibold\">{t.title}</div>\r\n                  {t.description ? <div className=\"text-muted small\">{t.description}</div> : null}\r\n                  <div className=\"text-muted small mt-1\">Автор: {t.author || \"(невідомо)\"}</div>\r\n                  {t.storeResponses ? <div className=\"mt-1\"><span className=\"badge bg-warning text-dark\">Потрібна реєстрація</span></div> : null}\r\n                </div>\r\n                <div>\r\n                  <Link href={`/tests/${t._id}`}>\r\n                    <button className=\"btn btn-sm btn-outline-primary\">Відкрити</button>\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n        <div className=\"d-flex justify-content-between align-items-center mt-3\">\r\n          <button className=\"btn btn-outline-secondary\" disabled={page <= 1} onClick={() => setPage((p) => Math.max(1, p - 1))}>Назад</button>\r\n          <div>Сторінка {page} / {totalPages}</div>\r\n          <button className=\"btn btn-outline-secondary\" disabled={page >= totalPages} onClick={() => setPage((p) => Math.min(totalPages, p + 1))}>Далі</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAuH,EAAE;IAC3J,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAS;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAS;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAS;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAS;IAErD,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU;QACd,eAAe;YACb,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,CAAC,uBAAuB,EAAE,KAAK,SAAS,CAAC,EAAE;oBAAE,OAAO;gBAAW;gBACvF,IAAI,CAAC,IAAI,EAAE,EAAE;oBACX,QAAQ,IAAI,CAAC,+BAA+B,MAAM,IAAI,IAAI;oBAC1D;gBACF;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,IAAI,WAAW,MAAM,MAAM,MAAM,OAAO,CAAC,KAAK,KAAK,GAAG;oBACpD,SAAS,KAAK,KAAK;oBACnB,cAAc,KAAK,UAAU,IAAI;gBACnC;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,IAAI,CAAC,gCAAgC;YAC/C,SAAU;gBACR,IAAI,SAAS,WAAW;YAC1B;QACF;QACA;QACA,OAAO;YAAQ,UAAU;QAAO;IAClC,GAAG;QAAC;KAAK;IAET,IAAA,kNAAS,EAAC;QACR,IAAI;YAAE,SAAS,KAAK,GAAG;QAA4B,EAAE,OAAM,CAAC;IAC9D,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAmB;;;;;;0BACjC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;gCAAoB,aAAY;gCAA2B,OAAO;gCAAO,UAAU,CAAC;oCAAQ,SAAS,EAAE,MAAM,CAAC,KAAK;oCAAG,QAAQ;gCAAI;;;;;;0CACnJ,8OAAC;gCAAM,WAAU;gCAAe,aAAY;gCAAsB,OAAO;gCAAa,UAAU,CAAC;oCAAQ,eAAe,EAAE,MAAM,CAAC,KAAK;oCAAG,QAAQ;gCAAI;;;;;;;;;;;;oBAEtJ,wBACC,8OAAC;wBAAI,WAAU;kCAAa;;;;;+BACxB,MAAM,MAAM,KAAK,kBACrB,8OAAC;wBAAI,WAAU;kCAAa;;;;;6CAE5B,8OAAC;wBAAI,WAAU;kCACV,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,MAAM,WAAW,OAAO,CAAC,cAAc,CAAC,EAAE,MAAM,IAAI,EAAE,EAAE,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,MAAM,IAAI,GAAG,GAAG,CAAC,CAAC,kBAC5K,8OAAC;gCAAgB,WAAU;;kDACzB,8OAAC;;0DACC,8OAAC;gDAAI,WAAU;0DAAe,EAAE,KAAK;;;;;;4CACpC,EAAE,WAAW,iBAAG,8OAAC;gDAAI,WAAU;0DAAoB,EAAE,WAAW;;;;;uDAAU;0DAC3E,8OAAC;gDAAI,WAAU;;oDAAwB;oDAAQ,EAAE,MAAM,IAAI;;;;;;;4CAC1D,EAAE,cAAc,iBAAG,8OAAC;gDAAI,WAAU;0DAAO,cAAA,8OAAC;oDAAK,WAAU;8DAA6B;;;;;;;;;;uDAAmC;;;;;;;kDAE5H,8OAAC;kDACC,cAAA,8OAAC,uKAAI;4CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,GAAG,EAAE;sDAC3B,cAAA,8OAAC;gDAAO,WAAU;0DAAiC;;;;;;;;;;;;;;;;;+BAT/C,EAAE,GAAG;;;;;;;;;;kCAgBrB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAO,WAAU;gCAA4B,UAAU,QAAQ;gCAAG,SAAS,IAAM,QAAQ,CAAC,IAAM,KAAK,GAAG,CAAC,GAAG,IAAI;0CAAK;;;;;;0CACtH,8OAAC;;oCAAI;oCAAU;oCAAK;oCAAI;;;;;;;0CACxB,8OAAC;gCAAO,WAAU;gCAA4B,UAAU,QAAQ;gCAAY,SAAS,IAAM,QAAQ,CAAC,IAAM,KAAK,GAAG,CAAC,YAAY,IAAI;0CAAK;;;;;;;;;;;;;;;;;;;;;;;;AAKlJ"}}]
}