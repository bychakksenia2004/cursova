{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/magistrature/Dockerwork/kursova/app/editor/attempts/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function AttemptsPage() {\r\n  const params = useParams();\r\n  const id = params?.id;\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n  const [attempts, setAttempts] = useState<any[]>([]);\r\n  const [query, setQuery] = useState(\"\");\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      if (!id) return;\r\n      setLoading(true);\r\n      try {\r\n        const url = `/api/attempts/${id}` + (query ? `?user=${encodeURIComponent(query)}` : \"\");\r\n        const res = await fetch(url, { credentials: \"include\" });\r\n        if (!res.ok) {\r\n          const txt = await res.text().catch(() => undefined);\r\n          setError(txt || `HTTP ${res.status}`);\r\n          return;\r\n        }\r\n        const data = await res.json();\r\n        if (mounted && data?.ok) setAttempts(data.attempts || []);\r\n      } catch (err) {\r\n        console.warn(err);\r\n        setError(\"Не вдалося завантажити проходження\");\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, [id, query]);\r\n\r\n  return (\r\n    <div className=\"container d-flex flex-column align-items-center min-vh-100\">\r\n      <h2 className=\"mb-3\">Проходження тесту</h2>\r\n      <div className=\"menu-box w-100\">\r\n        <div className=\"d-flex gap-2 mb-3\">\r\n          <input className=\"form-control\" placeholder=\"Пошук за ім'ям користувача\" value={query} onChange={(e) => setQuery(e.target.value)} />\r\n          <Link href=\"/editor\"><button className=\"btn btn-outline-secondary\">Назад</button></Link>\r\n        </div>\r\n        {loading ? (\r\n          <div className=\"text-muted\">Завантаження...</div>\r\n        ) : error ? (\r\n          <div className=\"text-danger\">{error}</div>\r\n        ) : attempts.length === 0 ? (\r\n          <div className=\"text-muted\">Поки немає проходжень.</div>\r\n        ) : (\r\n          <div className=\"list-group\">\r\n            {attempts.map((a) => (\r\n              <Link key={a.id} href={`/history/${a.id}`} className=\"list-group-item list-group-item-action text-decoration-none d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <div className=\"fw-semibold\">{a.username || \"Анонім\"}</div>\r\n                  <div className=\"text-muted small\">{new Date(a.createdAt).toLocaleString()}</div>\r\n                </div>\r\n                <div className=\"text-end\">\r\n                  <div className=\"fw-semibold\">{a.totalScore} / {a.totalPossible}</div>\r\n                </div>\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;AAHA;;;;AAKe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,KAAK,QAAQ;IACnB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAClD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAElD,IAAA,0KAAS;kCAAC;YACR,IAAI,UAAU;YACd,eAAe;gBACb,IAAI,CAAC,IAAI;gBACT,WAAW;gBACX,IAAI;oBACF,MAAM,MAAM,CAAC,cAAc,EAAE,IAAI,GAAG,CAAC,QAAQ,CAAC,MAAM,EAAE,mBAAmB,QAAQ,GAAG,EAAE;oBACtF,MAAM,MAAM,MAAM,MAAM,KAAK;wBAAE,aAAa;oBAAU;oBACtD,IAAI,CAAC,IAAI,EAAE,EAAE;wBACX,MAAM,MAAM,MAAM,IAAI,IAAI,GAAG,KAAK;2DAAC,IAAM;;wBACzC,SAAS,OAAO,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;wBACpC;oBACF;oBACA,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,IAAI,WAAW,MAAM,IAAI,YAAY,KAAK,QAAQ,IAAI,EAAE;gBAC1D,EAAE,OAAO,KAAK;oBACZ,QAAQ,IAAI,CAAC;oBACb,SAAS;gBACX,SAAU;oBACR,IAAI,SAAS,WAAW;gBAC1B;YACF;YACA;YACA;0CAAO;oBAAQ,UAAU;gBAAO;;QAClC;iCAAG;QAAC;QAAI;KAAM;IAEd,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAO;;;;;;0BACrB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;gCAAe,aAAY;gCAA6B,OAAO;gCAAO,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;0CAC/H,6LAAC,0KAAI;gCAAC,MAAK;0CAAU,cAAA,6LAAC;oCAAO,WAAU;8CAA4B;;;;;;;;;;;;;;;;;oBAEpE,wBACC,6LAAC;wBAAI,WAAU;kCAAa;;;;;+BAC1B,sBACF,6LAAC;wBAAI,WAAU;kCAAe;;;;;+BAC5B,SAAS,MAAM,KAAK,kBACtB,6LAAC;wBAAI,WAAU;kCAAa;;;;;6CAE5B,6LAAC;wBAAI,WAAU;kCACZ,SAAS,GAAG,CAAC,CAAC,kBACb,6LAAC,0KAAI;gCAAY,MAAM,CAAC,SAAS,EAAE,EAAE,EAAE,EAAE;gCAAE,WAAU;;kDACnD,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;0DAAe,EAAE,QAAQ,IAAI;;;;;;0DAC5C,6LAAC;gDAAI,WAAU;0DAAoB,IAAI,KAAK,EAAE,SAAS,EAAE,cAAc;;;;;;;;;;;;kDAEzE,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CAAI,WAAU;;gDAAe,EAAE,UAAU;gDAAC;gDAAI,EAAE,aAAa;;;;;;;;;;;;;+BANvD,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;AAe7B;GAnEwB;;QACP,kJAAS;QAET,kJAAS;;;KAHF"}}]
}