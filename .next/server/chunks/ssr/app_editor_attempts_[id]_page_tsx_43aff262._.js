module.exports=[80751,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246);function f(){let a=(0,d.useParams)(),f=a?.id;(0,d.useRouter)();let[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(1),[q,r]=(0,c.useState)(1);return(0,c.useEffect)(()=>{let a=!0;return async function(){if(f){h(!0);try{let b=`/api/attempts/${f}`,c=[];k&&c.push(`user=${encodeURIComponent(k)}`),c.push(`page=${o}`),c.push("limit=10"),c.length&&(b+=`?${c.join("&")}`);let d=await fetch(b,{credentials:"include"});if(!d.ok){let a=await d.text().catch(()=>void 0);n(a||`HTTP ${d.status}`);return}let e=await d.json();a&&e?.ok&&(j(e.attempts||[]),r(e.totalPages||1))}catch(a){console.warn(a),n("Не вдалося завантажити проходження")}finally{a&&h(!1)}}}(),()=>{a=!1}},[f,k,o]),(0,b.jsxs)("div",{className:"container d-flex flex-column align-items-center min-vh-100",children:[(0,b.jsx)("h2",{className:"mb-3",children:"Проходження тесту"}),(0,b.jsxs)("div",{className:"menu-box w-100",children:[(0,b.jsxs)("div",{className:"d-flex gap-2 mb-3",children:[(0,b.jsx)("input",{className:"form-control",placeholder:"Пошук за ім'ям користувача",value:k,onChange:a=>{l(a.target.value),p(1)}}),(0,b.jsx)(e.default,{href:"/editor",className:"btn btn-outline-secondary",children:"Назад"})]}),g?(0,b.jsx)("div",{className:"text-muted",children:"Завантаження..."}):m?(0,b.jsx)("div",{className:"text-danger",children:m}):0===i.length?(0,b.jsx)("div",{className:"text-muted",children:"Поки немає проходжень."}):(0,b.jsx)("div",{className:"list-group",children:i.map(a=>(0,b.jsxs)(e.default,{href:`/history/${a.id}`,className:"list-group-item list-group-item-action text-decoration-none d-flex justify-content-between align-items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"fw-semibold",children:a.username||"Анонім"}),(0,b.jsx)("div",{className:"text-muted small",children:new Date(a.createdAt).toLocaleString()})]}),(0,b.jsx)("div",{className:"text-end",children:(0,b.jsxs)("div",{className:"fw-semibold",children:[a.totalScore," / ",a.totalPossible]})})]},a.id))}),(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,b.jsx)("button",{className:"btn btn-outline-secondary",disabled:o<=1,onClick:()=>p(a=>Math.max(1,a-1)),children:"Назад"}),(0,b.jsxs)("div",{children:["Сторінка ",o," / ",q]}),(0,b.jsx)("button",{className:"btn btn-outline-secondary",disabled:o>=q,onClick:()=>p(a=>Math.min(q,a+1)),children:"Далі"})]})]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_editor_attempts_%5Bid%5D_page_tsx_43aff262._.js.map