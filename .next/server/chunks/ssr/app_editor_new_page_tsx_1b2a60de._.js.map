{"version":3,"sources":["../../../../app/editor/new/page.tsx","../../../../app/components/testcomponents/OpenAnswer.tsx","../../../../app/components/testcomponents/SingleChoice.tsx","../../../../app/components/testcomponents/MultiChoice.tsx","../../../../app/components/testcomponents/SequenceQuestion.tsx","../../../../app/components/testcomponents/MatchingQuestion.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport type { FormEvent } from \"react\";\r\nimport { useRouter, usePathname, useSearchParams } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport OpenAnswer from \"../../components/testcomponents/OpenAnswer\";\r\nimport SingleChoice from \"../../components/testcomponents/SingleChoice\";\r\nimport MultiChoice from \"../../components/testcomponents/MultiChoice\";\r\nimport SequenceQuestion from \"../../components/testcomponents/SequenceQuestion\";\r\nimport MatchingQuestion from \"../../components/testcomponents/MatchingQuestion\";\r\nexport default function NewTestPage() {\r\n  // hooks used across the component\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n\r\n  // Options management for single/multi choice\r\n  function ensureOptions(id: number) {\r\n    setQuestions((s) =>\r\n      s.map((q) => {\r\n        if (q.id !== id) return q;\r\n        if (!q.data) q.data = {};\r\n        if (!Array.isArray(q.data.options)) q.data.options = [];\r\n        return { ...q };\r\n      })\r\n    );\r\n  }\r\n\r\n  function addOptionToQuestion(id: number) {\r\n    const option = { id: Date.now(), text: \"\", correct: false };\r\n    setQuestions((s) =>\r\n      s.map((q) => (q.id === id ? { ...q, data: { ...(q.data || {}), options: [...((q.data && q.data.options) || []), option] } } : q))\r\n    );\r\n  }\r\n\r\n  function updateOptionText(id: number, optionId: number, text: string) {\r\n    setQuestions((s) =>\r\n      s.map((q) => {\r\n        if (q.id !== id) return q;\r\n        const opts = (q.data && q.data.options) || [];\r\n        return { ...q, data: { ...(q.data || {}), options: opts.map((o: any) => (o.id === optionId ? { ...o, text } : o)) } };\r\n      })\r\n    );\r\n  }\r\n\r\n  function removeOption(id: number, optionId: number) {\r\n    setQuestions((s) =>\r\n      s.map((q) => {\r\n        if (q.id !== id) return q;\r\n        const opts = (q.data && q.data.options) || [];\r\n        return { ...q, data: { ...(q.data || {}), options: opts.filter((o: any) => o.id !== optionId) } };\r\n      })\r\n    );\r\n  }\r\n\r\n  function toggleOptionCorrect(id: number, optionId: number) {\r\n    setQuestions((s) =>\r\n      s.map((q) => {\r\n        if (q.id !== id) return q;\r\n        const opts = (q.data && q.data.options) || [];\r\n        if (q.type === \"single\") {\r\n          return { ...q, data: { ...(q.data || {}), options: opts.map((o: any) => ({ ...o, correct: o.id === optionId })) } };\r\n        }\r\n        // multi\r\n        return { ...q, data: { ...(q.data || {}), options: opts.map((o: any) => (o.id === optionId ? { ...o, correct: !o.correct } : o)) } };\r\n      })\r\n    );\r\n  }\r\n\r\n  // Sequence (ordering) items management\r\n  function addSequenceItem(id: number) {\r\n    setQuestions((s) =>\r\n      s.map((q) => {\r\n        if (q.id !== id) return q;\r\n        const opts = (q.data && q.data.options) || [];\r\n        const maxOrder = opts.reduce((m: number, it: any) => Math.max(m, Number(it.order || 0)), 0);\r\n        const item = { id: Date.now(), text: \"\", order: maxOrder + 1 };\r\n        return { ...q, data: { ...(q.data || {}), options: [...opts, item] } };\r\n      })\r\n    );\r\n  }\r\n\r\n  function updateSequenceItemText(id: number, itemId: number, text: string) {\r\n    setQuestions((s) =>\r\n      s.map((q) => {\r\n        if (q.id !== id) return q;\r\n        const opts = (q.data && q.data.options) || [];\r\n        return { ...q, data: { ...(q.data || {}), options: opts.map((o: any) => (o.id === itemId ? { ...o, text } : o)) } };\r\n      })\r\n    );\r\n  }\r\n\r\n  function updateSequenceItemOrder(id: number, itemId: number, order: number) {\r\n    setQuestions((s) =>\r\n      s.map((q) => {\r\n        if (q.id !== id) return q;\r\n        const opts = (q.data && q.data.options) || [];\r\n        return { ...q, data: { ...(q.data || {}), options: opts.map((o: any) => (o.id === itemId ? { ...o, order } : o)) } };\r\n      })\r\n    );\r\n  }\r\n\r\n  function removeSequenceItem(id: number, itemId: number) {\r\n    setQuestions((s) =>\r\n      s.map((q) => {\r\n        if (q.id !== id) return q;\r\n        const opts = (q.data && q.data.options) || [];\r\n        return { ...q, data: { ...(q.data || {}), options: opts.filter((o: any) => o.id !== itemId) } };\r\n      })\r\n    );\r\n  }\r\n\r\n  // Matching (pairs) management\r\n  function addPairToQuestion(id: number) {\r\n    const pair = { id: Date.now(), left: \"\", right: \"\" };\r\n    setQuestions((s) =>\r\n      s.map((q) => (q.id === id ? { ...q, data: { ...(q.data || {}), pairs: [...((q.data && q.data.pairs) || []), pair] } } : q))\r\n    );\r\n  }\r\n\r\n  function updatePairText(id: number, pairId: number, side: \"left\" | \"right\", value: string) {\r\n    setQuestions((s) =>\r\n      s.map((q) => {\r\n        if (q.id !== id) return q;\r\n        const pairs = (q.data && q.data.pairs) || [];\r\n        return { ...q, data: { ...(q.data || {}), pairs: pairs.map((p: any) => (p.id === pairId ? { ...p, [side]: value } : p)) } };\r\n      })\r\n    );\r\n  }\r\n\r\n  function removePairFromQuestion(id: number, pairId: number) {\r\n    setQuestions((s) =>\r\n      s.map((q) => {\r\n        if (q.id !== id) return q;\r\n        const pairs = (q.data && q.data.pairs) || [];\r\n        return { ...q, data: { ...(q.data || {}), pairs: pairs.filter((p: any) => p.id !== pairId) } };\r\n      })\r\n    );\r\n  }\r\n\r\n  // Open answer expected values (array)\r\n  function updateOpenAnswer(id: number, answers: string[]) {\r\n    setQuestions((s) =>\r\n      s.map((q) => (q.id === id ? { ...q, data: { ...(q.data || {}), answers } } : q))\r\n    );\r\n  }\r\n\r\n  function removeQuestion(id: number) {\r\n    setQuestions((s) => s.filter((q) => q.id !== id));\r\n  }\r\n\r\n  // new question type selector state and helpers (used by UI)\r\n  const [newQuestionType, setNewQuestionType] = useState<\"single\" | \"multi\" | \"sequence\" | \"open\" | \"matching\">(\"single\");\r\n\r\n  function updateQuestion(qid: number, text: string) {\r\n    setQuestions((s) => s.map((q) => (q.id === qid ? { ...q, text } : q)));\r\n  }\r\n\r\n  function updateQuestionPoints(qid: number, points: number) {\r\n    setQuestions((s) => s.map((q) => (q.id === qid ? { ...q, points } : q)));\r\n  }\r\n\r\n  function updateQuestionType(qid: number, type: string) {\r\n    setQuestions((s) => s.map((q, idx) => {\r\n      if (q.id !== qid) return q;\r\n      const out: any = { ...q, type };\r\n      out.data = out.data || {};\r\n      const baseId = Date.now() + idx;\r\n      if ((type === \"single\" || type === \"multi\") && !Array.isArray(out.data.options)) {\r\n        out.data.options = [ { id: baseId + 1, text: \"\", correct: false }, { id: baseId + 2, text: \"\", correct: false } ];\r\n      }\r\n      if (type === \"sequence\" && !Array.isArray(out.data.options)) {\r\n        out.data.options = [ { id: baseId + 1, text: \"\", order: 1 }, { id: baseId + 2, text: \"\", order: 2 } ];\r\n      }\r\n      if (type === \"matching\" && !Array.isArray(out.data.pairs)) {\r\n        out.data.pairs = [ { id: baseId + 1, left: \"\", right: \"\" }, { id: baseId + 2, left: \"\", right: \"\" } ];\r\n      }\r\n      if (type === \"open\" && !Array.isArray(out.data.answers)) {\r\n        out.data.answers = [\"\"];\r\n      }\r\n      return normalizeQuestion(out, idx);\r\n    }));\r\n  }\r\n\r\n  function addQuestion() {\r\n    const baseId = Date.now();\r\n    let data: any = {};\r\n    if (newQuestionType === \"single\" || newQuestionType === \"multi\") {\r\n      // create two empty options by default\r\n      data.options = [\r\n        { id: baseId + 1, text: \"\", correct: false },\r\n        { id: baseId + 2, text: \"\", correct: false },\r\n      ];\r\n    } else if (newQuestionType === \"sequence\") {\r\n      data.options = [\r\n        { id: baseId + 1, text: \"\", order: 1 },\r\n        { id: baseId + 2, text: \"\", order: 2 },\r\n      ];\r\n    } else if (newQuestionType === \"matching\") {\r\n      data.pairs = [\r\n        { id: baseId + 1, left: \"\", right: \"\" },\r\n        { id: baseId + 2, left: \"\", right: \"\" },\r\n      ];\r\n    } else if (newQuestionType === \"open\") {\r\n      data.answers = [\"\"];\r\n    }\r\n    const q: any = { id: baseId, type: newQuestionType, text: \"\", data };\r\n    setQuestions((s) => [...s, normalizeQuestion(q, s.length)]);\r\n  }\r\n\r\n  async function uploadToCloudinary(file: File) {\r\n    try {\r\n      const cloudName = process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME;\r\n      const uploadPreset = process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET;\r\n      if (!cloudName || !uploadPreset) {\r\n        alert(\"Cloudinary not configured. Set NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME and NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET in your env.\");\r\n        return null;\r\n      }\r\n      const form = new FormData();\r\n      form.append(\"file\", file);\r\n      form.append(\"upload_preset\", uploadPreset);\r\n      const res = await fetch(`https://api.cloudinary.com/v1_1/${cloudName}/image/upload`, {\r\n        method: \"POST\",\r\n        body: form,\r\n      });\r\n      if (!res.ok) {\r\n        console.error(\"Upload failed\", await res.text());\r\n        return null;\r\n      }\r\n      const j = await res.json();\r\n      return j.secure_url || j.url || null;\r\n    } catch (err) {\r\n      console.error(err);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  function updateQuestionImage(qid: number, url: string | null) {\r\n    setQuestions((s) => s.map((q) => (q.id === qid ? { ...q, imageUrl: url || undefined } : q)));\r\n  }\r\n\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [visibility, setVisibility] = useState<\"public\" | \"private\">(\"public\");\r\n  const [storeResponses, setStoreResponses] = useState<boolean>(true);\r\n  const [ownResultView, setOwnResultView] = useState<\"full\" | \"score_only\" | \"nothing\">(\"full\");\r\n  const [timed, setTimed] = useState<boolean>(false);\r\n  const [timeLimitMinutes, setTimeLimitMinutes] = useState<number | \"\">(\"\");\r\n  const [dateWindowEnabled, setDateWindowEnabled] = useState<boolean>(false);\r\n  const [openFrom, setOpenFrom] = useState<string>(\"\");\r\n  const [openTo, setOpenTo] = useState<string>(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [questions, setQuestions] = useState<\r\n    Array<{ id: number; type: string; text: string; data?: any; imageUrl?: string; points?: number }>\r\n  >([]);\r\n  const [initialImageUrls, setInitialImageUrls] = useState<string[]>([]);\r\n  const [invalidField, setInvalidField] = useState<null | { qid: number; field: string; idx?: number; message?: string }>(null);\r\n  const DRAFT_KEY = \"test_draft_v1\";\r\n  const [lastSaved, setLastSaved] = useState<number | null>(null);\r\n  const [editId, setEditId] = useState<string | null>(null);\r\n  const [editForbidden, setEditForbidden] = useState<boolean>(false);\r\n  // Ensure restored questions and nested items have necessary ids/defaults\r\n  function normalizeQuestion(q: any, idx: number) {\r\n    const out: any = { ...q };\r\n    if (!out.id) out.id = Date.now() + idx + 1;\r\n    if (!out.type) out.type = out.type || \"single\";\r\n    if (typeof out.text === \"undefined\") out.text = \"\";\r\n    out.data = out.data || {};\r\n    if (out.type === \"single\" || out.type === \"multi\") {\r\n      out.data.options = Array.isArray(out.data.options) ? out.data.options.map((o: any, i: number) => ({\r\n        id: o?.id || (Date.now() + idx + i + 2),\r\n        text: typeof o?.text === \"undefined\" ? \"\" : o.text,\r\n        correct: !!o?.correct,\r\n      })) : [];\r\n    } else if (out.type === \"sequence\") {\r\n      out.data.options = Array.isArray(out.data.options) ? out.data.options.map((o: any, i: number) => ({\r\n        id: o?.id || (Date.now() + idx + i + 2),\r\n        text: typeof o?.text === \"undefined\" ? \"\" : o.text,\r\n        order: typeof o?.order === \"undefined\" ? i + 1 : o.order,\r\n      })) : [];\r\n    } else if (out.type === \"matching\") {\r\n      out.data.pairs = Array.isArray(out.data.pairs) ? out.data.pairs.map((p: any, i: number) => ({\r\n        id: p?.id || (Date.now() + idx + i + 2),\r\n        left: typeof p?.left === \"undefined\" ? \"\" : p.left,\r\n        right: typeof p?.right === \"undefined\" ? \"\" : p.right,\r\n      })) : [];\r\n    } else if (out.type === \"open\") {\r\n      out.data.answers = Array.isArray(out.data.answers) ? out.data.answers.map((a: any) => (typeof a === \"undefined\" ? \"\" : a)) : [\"\"];\r\n    }\r\n    // ensure points available per question (default 1)\r\n    out.points = typeof out.points === \"number\" ? out.points : (out.data && typeof out.data.points === \"number\" ? out.data.points : 1);\r\n    return out;\r\n  }\r\n  // Always restore draft on mount so navigating away and back preserves state\r\n\r\n  useEffect(() => {\r\n    try {\r\n      document.title = editId ? \"TestHub | Редагування тесту\" : \"TestHub | Новий тест\";\r\n    } catch {}\r\n  }, [editId]);\r\n\r\n  // reusable draft loader\r\n  function loadDraftFromStorage() {\r\n    try {\r\n      if (typeof window === \"undefined\") return;\r\n      const raw = window.localStorage.getItem(DRAFT_KEY);\r\n      if (!raw) return;\r\n      const parsed = JSON.parse(raw);\r\n      try { console.debug(\"[NewTestPage] loaded draft:\", parsed); } catch {}\r\n      if (parsed && Object.prototype.hasOwnProperty.call(parsed, \"title\")) setTitle(parsed.title ?? \"\");\r\n      if (parsed && Object.prototype.hasOwnProperty.call(parsed, \"description\")) setDescription(parsed.description ?? \"\");\r\n      if (parsed && Object.prototype.hasOwnProperty.call(parsed, \"visibility\")) setVisibility(parsed.visibility ?? \"public\");\r\n      if (parsed && Object.prototype.hasOwnProperty.call(parsed, \"storeResponses\") && typeof parsed.storeResponses === \"boolean\") setStoreResponses(parsed.storeResponses);\r\n      if (parsed && Object.prototype.hasOwnProperty.call(parsed, \"ownResultView\")) setOwnResultView(parsed.ownResultView ?? \"full\");\r\n      if (parsed && Object.prototype.hasOwnProperty.call(parsed, \"timed\")) setTimed(!!parsed.timed);\r\n      if (parsed && Object.prototype.hasOwnProperty.call(parsed, \"timeLimitMinutes\")) setTimeLimitMinutes(typeof parsed.timeLimitMinutes === \"number\" ? parsed.timeLimitMinutes : (parsed.timeLimitMinutes ?? \"\"));\r\n      if (Array.isArray(parsed?.questions)) setQuestions(parsed.questions.map((q: any, i: number) => normalizeQuestion(q, i)));\r\n      if (parsed && Object.prototype.hasOwnProperty.call(parsed, \"lastSaved\")) setLastSaved(parsed.lastSaved ?? null);\r\n    } catch (err) {\r\n      console.warn(\"Failed to load draft:\", err);\r\n    }\r\n  }\r\n\r\n  // Load on mount\r\n  useEffect(() => {\r\n    loadDraftFromStorage();\r\n    // If the URL has ?edit=<id> fetch test for editing\r\n    try {\r\n      const id = searchParams.get(\"edit\");\r\n              if (id) {\r\n        setEditId(id);\r\n        (async function () {\r\n          try {\r\n            const res = await fetch(`/api/tests/${id}`, { credentials: \"include\" });\r\n            if (!res.ok) {\r\n              // mark that editing this test is forbidden for current user\r\n              if (res.status === 403) setEditForbidden(true);\r\n              return;\r\n            }\r\n            const data = await res.json();\r\n            if (data?.ok && data.test) {\r\n              const t = data.test;\r\n              setTitle(t.title || \"\");\r\n              setDescription(t.description || \"\");\r\n              setVisibility(t.visibility || \"public\");\r\n              setStoreResponses(!!t.storeResponses);\r\n              setOwnResultView(t.ownResultView || \"full\");\r\n              setTimed(!!t.timed);\r\n              setTimeLimitMinutes(typeof t.timeLimitMinutes === \"number\" ? t.timeLimitMinutes : (t.timeLimitMinutes ?? \"\"));\r\n              setDateWindowEnabled(!!t.dateWindowEnabled);\r\n              setOpenFrom(t.openFrom ? String(new Date(t.openFrom).toISOString().slice(0, 16)) : \"\");\r\n              setOpenTo(t.openTo ? String(new Date(t.openTo).toISOString().slice(0, 16)) : \"\");\r\n              // map server question types back to frontend\r\n              const mapped = Array.isArray(t.questions) ? t.questions.map((q: any) => {\r\n                const mapBack = (stype: string) => {\r\n                  switch (stype) {\r\n                    case \"single_choice\": return \"single\";\r\n                    case \"multi_choice\": return \"multi\";\r\n                    case \"sequence\": return \"sequence\";\r\n                    case \"matching\": return \"matching\";\r\n                    case \"open\": return \"open\";\r\n                    default: return stype;\r\n                  }\r\n                };\r\n                const ftype = mapBack(q.type);\r\n                const dataObj: any = {};\r\n                if (ftype === \"single\" || ftype === \"multi\") dataObj.options = q.options || [];\r\n                else if (ftype === \"sequence\") dataObj.options = q.options || [];\r\n                else if (ftype === \"matching\") dataObj.pairs = q.pairs || [];\r\n                else if (ftype === \"open\") dataObj.answers = q.answers || [];\r\n                return { id: q.id || Date.now(), type: ftype, text: q.text || \"\", data: dataObj, points: typeof q.points === \"number\" ? q.points : 1, imageUrl: q.imageUrl || (q.image && (q.image.secure_url || q.image.url)) || undefined };\r\n              }) : [];\r\n              setQuestions(mapped);\r\n              try {\r\n                const imgs = mapped.map((q: any) => q.imageUrl).filter(Boolean) as string[];\r\n                setInitialImageUrls(imgs);\r\n              } catch {}\r\n            }\r\n          } catch (err) {\r\n            console.warn(\"Failed to load test for edit:\", err);\r\n          }\r\n        })();\r\n      }\r\n    } catch {}\r\n  }, []);\r\n\r\n  // Also reload when pathname becomes this page (handles client-side navigation back)\r\n  const pathname = usePathname();\r\n  useEffect(() => {\r\n    try {\r\n      if (pathname === \"/editor/new\") {\r\n        // only reload draft when not editing a specific test\r\n        const id = searchParams.get(\"edit\");\r\n        if (!id) loadDraftFromStorage();\r\n      }\r\n    } catch {}\r\n  }, [pathname]);\r\n\r\n  // Auto-save draft to localStorage (immediate)\r\n  useEffect(() => {\r\n    try {\r\n      if (typeof window === \"undefined\") return;\r\n      const payload = {\r\n        title,\r\n        description,\r\n        visibility,\r\n        storeResponses,\r\n        timed,\r\n        timeLimitMinutes,\r\n        dateWindowEnabled,\r\n        openFrom,\r\n        openTo,\r\n        ownResultView,\r\n        questions,\r\n        lastSaved: Date.now(),\r\n      };\r\n      try {\r\n        window.localStorage.setItem(DRAFT_KEY, JSON.stringify(payload));\r\n        setLastSaved(payload.lastSaved);\r\n      } catch (err) {\r\n        console.warn(\"Failed to save draft:\", err);\r\n      }\r\n    } catch {}\r\n  }, [title, description, visibility, storeResponses, ownResultView, questions]);\r\n\r\n  function clearDraft() {\r\n    try {\r\n      if (typeof window === \"undefined\") return;\r\n      window.localStorage.removeItem(DRAFT_KEY);\r\n    } catch {}\r\n    setTitle(\"\");\r\n    setDescription(\"\");\r\n    setVisibility(\"public\");\r\n    setStoreResponses(true);\r\n    setTimed(false);\r\n    setTimeLimitMinutes(\"\");\r\n    setDateWindowEnabled(false);\r\n    setOpenFrom(\"\");\r\n    setOpenTo(\"\");\r\n    setOwnResultView(\"full\");\r\n    setQuestions([]);\r\n    setLastSaved(null);\r\n    setInvalidField(null);\r\n    setError(null);\r\n  }\r\n\r\n\r\n  // Note: lastSaved timestamp is still stored in localStorage but not shown in the UI.\r\n\r\n  function validateQuestions() {\r\n    // validate title first\r\n    if (!title || !String(title).trim()) {\r\n      const msg = \"Вкажіть назву тесту\";\r\n      setError(msg);\r\n      const foundInvalid: { qid: number; field: string; idx?: number; message?: string } = { qid: -1, field: \"title\", message: msg };\r\n      setInvalidField(foundInvalid);\r\n      const el = document.querySelector(`[data-field=\"title\"]`) as HTMLElement | null;\r\n      if (el) {\r\n        el.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n        try { (el as HTMLElement).focus(); } catch {}\r\n      }\r\n      return false;\r\n    }\r\n\r\n    if (!questions || questions.length === 0) {\r\n      setError(\"Додайте принаймні одне питання\");\r\n      return false;\r\n    }\r\n\r\n    // validate timing if enabled\r\n    if (timed) {\r\n      const n = typeof timeLimitMinutes === \"number\" ? timeLimitMinutes : (timeLimitMinutes ? Number(timeLimitMinutes) : NaN);\r\n      if (!Number.isFinite(n) || n <= 0) {\r\n        setError(\"Вкажіть коректну тривалість тесту у хвилинах\");\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // validate date window if enabled\r\n    if (dateWindowEnabled) {\r\n      if (!openFrom || !openTo) {\r\n        setError(\"Вкажіть дати початку та кінця відкритості тесту\");\r\n        return false;\r\n      }\r\n      const f = new Date(openFrom);\r\n      const t = new Date(openTo);\r\n      if (isNaN(f.getTime()) || isNaN(t.getTime()) || f.getTime() > t.getTime()) {\r\n        setError(\"Некоректні дати: початок має бути раніше або рівним кінцю\");\r\n        return false;\r\n      }\r\n    }\r\n\r\n    let firstInvalidSelector: string | null = null;\r\n    let foundInvalid: null | { qid: number; field: string; idx?: number; message?: string } = null;\r\n    for (let i = 0; i < questions.length; i++) {\r\n      const q = questions[i];\r\n      const qNo = i + 1;\r\n      if (!q.text || !String(q.text).trim()) {\r\n        const msg = `Питання ${qNo}: введіть текст питання`;\r\n        setError(msg);\r\n        foundInvalid = { qid: q.id, field: \"text\", message: msg };\r\n        firstInvalidSelector = `[data-qid=\"${q.id}\"][data-field=\"text\"]`;\r\n        break;\r\n      }\r\n      if (q.type === \"single\" || q.type === \"multi\") {\r\n        const opts = (q.data && q.data.options) || [];\r\n        if (!opts || opts.length === 0) {\r\n          const msg = `Питання ${qNo}: додайте варіанти відповіді`;\r\n          setError(msg);\r\n          foundInvalid = { qid: q.id, field: \"option\", message: msg };\r\n          firstInvalidSelector = `[data-qid=\"${q.id}\"][data-field=\"option\"]`;\r\n          break;\r\n        }\r\n        for (let j = 0; j < opts.length; j++) {\r\n          const o = opts[j];\r\n          if (!o.text || !String(o.text).trim()) {\r\n            const msg = `Питання ${qNo}, варіант ${j + 1}: введіть текст варіанту`;\r\n            setError(msg);\r\n            foundInvalid = { qid: q.id, field: \"option\", idx: j, message: msg };\r\n            firstInvalidSelector = `[data-qid=\"${q.id}\"][data-field=\"option\"][data-idx=\"${j}\"]`;\r\n            break;\r\n          }\r\n        }\r\n        if (firstInvalidSelector) break;\r\n        const hasCorrect = opts.some((o: any) => !!o.correct);\r\n        if (!hasCorrect) {\r\n          const msg = `Питання ${qNo}: позначте принаймні один правильний варіант`;\r\n          setError(msg);\r\n          foundInvalid = { qid: q.id, field: \"option\", message: msg };\r\n          firstInvalidSelector = `[data-qid=\"${q.id}\"][data-field=\"option\"]`;\r\n          break;\r\n        }\r\n      } else if (q.type === \"sequence\") {\r\n        const items = (q.data && q.data.options) || [];\r\n        if (!items || items.length === 0) {\r\n          const msg = `Питання ${qNo}: додайте елементи послідовності`;\r\n          setError(msg);\r\n          foundInvalid = { qid: q.id, field: \"sequence\", message: msg };\r\n          firstInvalidSelector = `[data-qid=\"${q.id}\"][data-field=\"sequence\"]`;\r\n          break;\r\n        }\r\n        for (let j = 0; j < items.length; j++) {\r\n          if (!items[j].text || !String(items[j].text).trim()) {\r\n            const msg = `Питання ${qNo}, елемент ${j + 1}: введіть текст`;\r\n            setError(msg);\r\n            foundInvalid = { qid: q.id, field: \"sequence\", idx: j, message: msg };\r\n            firstInvalidSelector = `[data-qid=\"${q.id}\"][data-field=\"sequence\"][data-idx=\"${j}\"]`;\r\n            break;\r\n          }\r\n        }\r\n        if (firstInvalidSelector) break;\r\n      } else if (q.type === \"matching\") {\r\n        const pairs = (q.data && q.data.pairs) || [];\r\n        if (!pairs || pairs.length === 0) {\r\n          const msg = `Питання ${qNo}: додайте пари відповідностей`;\r\n          setError(msg);\r\n          foundInvalid = { qid: q.id, field: \"pair\", message: msg };\r\n          firstInvalidSelector = `[data-qid=\"${q.id}\"][data-field=\"pair\"]`;\r\n          break;\r\n        }\r\n        for (let j = 0; j < pairs.length; j++) {\r\n          const p = pairs[j];\r\n          if (!p.left || !String(p.left).trim() || !p.right || !String(p.right).trim()) {\r\n            const msg = `Питання ${qNo}, пара ${j + 1}: заповніть обидва поля пари`;\r\n            setError(msg);\r\n            foundInvalid = { qid: q.id, field: \"pair\", idx: j, message: msg };\r\n            firstInvalidSelector = `[data-qid=\"${q.id}\"][data-field=\"pair\"][data-idx=\"${j}\"]`;\r\n            break;\r\n          }\r\n        }\r\n        if (firstInvalidSelector) break;\r\n      } else if (q.type === \"open\") {\r\n        const answers = (q.data && q.data.answers) || [];\r\n        if (!answers || answers.length === 0) {\r\n          const msg = `Питання ${qNo}: додайте принаймні одну очікувану відповідь або заповніть питання`;\r\n          setError(msg);\r\n          foundInvalid = { qid: q.id, field: \"answer\", message: msg };\r\n          firstInvalidSelector = `[data-qid=\"${q.id}\"][data-field=\"answer\"]`;\r\n          break;\r\n        }\r\n        for (let j = 0; j < answers.length; j++) {\r\n          if (!answers[j] || !String(answers[j]).trim()) {\r\n            const msg = `Питання ${qNo}, очікувана відповідь ${j + 1}: введіть текст`;\r\n            setError(msg);\r\n            foundInvalid = { qid: q.id, field: \"answer\", idx: j, message: msg };\r\n            firstInvalidSelector = `[data-qid=\"${q.id}\"][data-field=\"answer\"][data-idx=\"${j}\"]`;\r\n            break;\r\n          }\r\n        }\r\n        if (firstInvalidSelector) break;\r\n      }\r\n    }\r\n    if (foundInvalid) {\r\n      setInvalidField(foundInvalid);\r\n      const el = document.querySelector(firstInvalidSelector!) as HTMLElement | null;\r\n      if (el) {\r\n        el.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n        try { (el as HTMLElement).focus(); } catch {}\r\n      }\r\n      return false;\r\n    }\r\n    setInvalidField(null);\r\n    setError(null);\r\n    return true;\r\n  }\r\n\r\n  async function onSubmit(e: FormEvent) {\r\n    e.preventDefault();\r\n    setError(null);\r\n    if (!validateQuestions()) return;\r\n    // title validation now handled in validateQuestions()\r\n    setLoading(true);\r\n    try {\r\n      if (editId && editForbidden) {\r\n        setError(\"Ви не маєте прав редагувати цей тест.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      // If editing, delete any images that existed in the original test but were removed now\r\n      if (editId && Array.isArray(initialImageUrls) && initialImageUrls.length > 0) {\r\n        const currentUrls = questions.map((q) => q.imageUrl).filter(Boolean) as string[];\r\n        const removed = initialImageUrls.filter((u) => !currentUrls.includes(u));\r\n        if (removed.length > 0) {\r\n          const failures: string[] = [];\r\n          for (const url of removed) {\r\n            try {\r\n              const res = await fetch(`/api/cloudinary/delete`, {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ imageUrl: url }),\r\n              });\r\n              if (!res.ok) {\r\n                const txt = await res.text().catch(() => undefined);\r\n                failures.push(`${url} -> ${txt || res.status}`);\r\n              }\r\n            } catch (err) {\r\n              failures.push(`${url} -> ${String(err)}`);\r\n            }\r\n          }\r\n          if (failures.length > 0) {\r\n            setLoading(false);\r\n            alert(\"Не вдалося видалити старі зображення:\\n\" + failures.join(\"\\n\"));\r\n            return;\r\n          }\r\n        }\r\n      }\r\n      let res: Response;\r\n      // Prepare questions in the frontend shape the API expects.\r\n      // The server will map frontend types (e.g. 'single') to DB discriminators (e.g. 'single_choice').\r\n      const frontQuestions = questions.map((q: any) => {\r\n        const out: any = { id: q.id, type: q.type, text: q.text || \"\", points: typeof q.points === \"number\" ? q.points : 1 };\r\n        if (q.type === \"single\" || q.type === \"multi\" || q.type === \"sequence\") {\r\n          out.data = out.data || {};\r\n          out.data.options = Array.isArray(q.data?.options)\r\n            ? q.data.options.map((o: any) => ({ id: o.id, text: o.text, correct: !!o.correct, order: o.order }))\r\n            : [];\r\n        } else if (q.type === \"matching\") {\r\n          out.data = out.data || {};\r\n          out.data.pairs = Array.isArray(q.data?.pairs) ? q.data.pairs.map((p: any) => ({ id: p.id, left: p.left, right: p.right })) : [];\r\n        } else if (q.type === \"open\") {\r\n          out.data = out.data || {};\r\n          out.data.answers = Array.isArray(q.data?.answers) ? q.data.answers.map((a: any) => String(a || \"\")) : [];\r\n        }\r\n        if (q.imageUrl) out.imageUrl = q.imageUrl;\r\n        return out;\r\n      });\r\n\r\n      const payload = {\r\n        title,\r\n        description,\r\n        visibility,\r\n        storeResponses,\r\n        timed,\r\n        timeLimitMinutes: typeof timeLimitMinutes === \"number\" ? timeLimitMinutes : (timeLimitMinutes ? Number(timeLimitMinutes) : undefined),\r\n        dateWindowEnabled,\r\n        openFrom: openFrom || undefined,\r\n        openTo: openTo || undefined,\r\n        ownResultView,\r\n        questions: frontQuestions,\r\n      };\r\n      if (editId) {\r\n        res = await fetch(`/api/tests/${editId}`, {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          credentials: \"include\",\r\n          body: JSON.stringify(payload),\r\n        });\r\n      } else {\r\n        res = await fetch(\"/api/tests\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          credentials: \"include\",\r\n          body: JSON.stringify(payload),\r\n        });\r\n      }\r\n      if (!res.ok) {\r\n        const txt = await res.text();\r\n        throw new Error(txt || `HTTP ${res.status}`);\r\n      }\r\n      // після успіху — повернутись до /editor\r\n      router.push(\"/editor\");\r\n    } catch (err: any) {\r\n      setError(err?.message || (editId ? \"Помилка при оновленні тесту\" : \"Помилка при створенні тесту\"));\r\n      setLoading(false);\r\n    }\r\n  }\r\n  if (editForbidden) {\r\n    return (\r\n      <div className=\"container d-flex flex-column align-items-center min-vh-100\">\r\n        <h2 className=\"mb-4 text-center\">Редагування заборонено</h2>\r\n        <div className=\"menu-box p-4\">\r\n          <div className=\"alert alert-danger\">Ви не маєте прав редагувати цей тест.</div>\r\n          <div className=\"d-flex gap-2\">\r\n            <Link href=\"/editor\" className=\"btn btn-outline-secondary\">Назад</Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container d-flex flex-column align-items-center min-vh-100\">\r\n      <h2 className=\"mb-4 text-center\">{editId ? \"Редагування тесту\" : \"Новий тест\"}</h2>\r\n      \r\n      <form className=\"menu-box p-4\" onSubmit={onSubmit}>\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Назва</label>\r\n          <input\r\n            className={`form-control ${invalidField && invalidField.field === \"title\" ? \"is-invalid\" : \"\"}`}\r\n            value={title}\r\n            data-field=\"title\"\r\n            onChange={(e) => setTitle(e.target.value)}\r\n          />\r\n          {invalidField && invalidField.field === \"title\" && (\r\n            <div className=\"invalid-feedback d-block app-error\">{invalidField.message}</div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Опис</label>\r\n          <textarea\r\n            className=\"form-control\"\r\n            rows={5}\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label d-block\">Видимість</label>\r\n          <div className=\"btn-group\" role=\"group\">\r\n            <input\r\n              type=\"radio\"\r\n              className=\"btn-check\"\r\n              name=\"visibility\"\r\n              id=\"public\"\r\n              autoComplete=\"off\"\r\n              checked={visibility === \"public\"}\r\n              onChange={() => setVisibility(\"public\")}\r\n            />\r\n            <label className=\"btn btn-outline-primary\" htmlFor=\"public\">\r\n              Публічний\r\n            </label>\r\n\r\n            <input\r\n              type=\"radio\"\r\n              className=\"btn-check\"\r\n              name=\"visibility\"\r\n              id=\"private\"\r\n              autoComplete=\"off\"\r\n              checked={visibility === \"private\"}\r\n              onChange={() => setVisibility(\"private\")}\r\n            />\r\n            <label className=\"btn btn-outline-primary\" htmlFor=\"private\">\r\n              Приватний\r\n            </label>\r\n\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label d-block\">Зберігати відповіді та результати користувачів</label>\r\n          <div className=\"btn-group\" role=\"group\">\r\n            <input\r\n              type=\"radio\"\r\n              className=\"btn-check\"\r\n              name=\"storeResponses\"\r\n              id=\"storeYes\"\r\n              autoComplete=\"off\"\r\n              checked={storeResponses === true}\r\n              onChange={() => setStoreResponses(true)}\r\n            />\r\n            <label className=\"btn btn-outline-primary\" htmlFor=\"storeYes\">\r\n              Так\r\n            </label>\r\n\r\n            <input\r\n              type=\"radio\"\r\n              className=\"btn-check\"\r\n              name=\"storeResponses\"\r\n              id=\"storeNo\"\r\n              autoComplete=\"off\"\r\n              checked={storeResponses === false}\r\n              onChange={() => {\r\n                setStoreResponses(false);\r\n                // prevent 'nothing' view when responses are not stored\r\n                if (ownResultView === \"nothing\") setOwnResultView(\"full\");\r\n              }}\r\n            />\r\n            <label className=\"btn btn-outline-primary\" htmlFor=\"storeNo\">\r\n              Ні\r\n            </label>\r\n          </div>\r\n          <div className=\"form-text mt-1\">\r\n            Якщо так — зберігатимуться індивідуальні відповіді та результати (ви зможете бачити список користувачів, які пройшли тест).\r\n          </div>\r\n        </div>\r\n\r\n        {/* ownResultView: що бачить сам користувач після проходження */}\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label d-block\">Що бачить користувач після проходження</label>\r\n          <div className=\"btn-group\" role=\"group\">\r\n            <input\r\n              type=\"radio\"\r\n              className=\"btn-check\"\r\n              name=\"ownResultView\"\r\n              id=\"ownFull\"\r\n              autoComplete=\"off\"\r\n              checked={ownResultView === \"full\"}\r\n              onChange={() => setOwnResultView(\"full\")}\r\n            />\r\n            <label className=\"btn btn-outline-primary\" htmlFor=\"ownFull\">\r\n              Повні результати (питання + відповіді + бали)\r\n            </label>\r\n\r\n            <input\r\n              type=\"radio\"\r\n              className=\"btn-check\"\r\n              name=\"ownResultView\"\r\n              id=\"ownScore\"\r\n              autoComplete=\"off\"\r\n              checked={ownResultView === \"score_only\"}\r\n              onChange={() => setOwnResultView(\"score_only\")}\r\n            />\r\n            <label className=\"btn btn-outline-primary\" htmlFor=\"ownScore\">\r\n              Тільки бали\r\n            </label>\r\n\r\n            <input\r\n              type=\"radio\"\r\n              className=\"btn-check\"\r\n              name=\"ownResultView\"\r\n              id=\"ownNothing\"\r\n              autoComplete=\"off\"\r\n              checked={ownResultView === \"nothing\"}\r\n              disabled={storeResponses === false}\r\n              onChange={() => { if (storeResponses) setOwnResultView(\"nothing\"); }}\r\n            />\r\n            {storeResponses ? <label className=\"btn btn-outline-primary\" htmlFor=\"ownNothing\">\r\n              Нічого не показувати\r\n            </label> : null}\r\n          </div>\r\n          <div className=\"form-text mt-1\">\r\n            Ця опція визначає, що бачить сам користувач після завершення тесту.\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label d-block\">Налаштування часу</label>\r\n          <div className=\"form-check form-switch mb-2\">\r\n            <input className=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"timedSwitch\" checked={timed} onChange={(e) => setTimed(e.target.checked)} />\r\n            <label className=\"form-check-label\" htmlFor=\"timedSwitch\">Обмежений час проходження</label>\r\n          </div>\r\n          {timed && (\r\n            <div className=\"d-flex align-items-center gap-2 mb-2\">\r\n              <div style={{ width: 220 }}>\r\n                <input\r\n                  type=\"number\"\r\n                  min={1}\r\n                  className=\"form-control\"\r\n                  value={timeLimitMinutes as any}\r\n                  onChange={(e) => setTimeLimitMinutes(e.target.value === \"\" ? \"\" : Number(e.target.value))}\r\n                  placeholder=\"Тривалість (хвилин)\"\r\n                />\r\n              </div>\r\n              <div className=\"form-text\">Вкажіть тривалість тесту в хвилинах.</div>\r\n            </div>\r\n          )}\r\n\r\n          <hr />\r\n\r\n          <div className=\"form-check form-switch mb-2\">\r\n            <input className=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"dateWindowSwitch\" checked={dateWindowEnabled} onChange={(e) => setDateWindowEnabled(e.target.checked)} />\r\n            <label className=\"form-check-label\" htmlFor=\"dateWindowSwitch\">Обмежити доступ датами</label>\r\n          </div>\r\n          {dateWindowEnabled && (\r\n            <div className=\"d-flex flex-column gap-2\">\r\n              <div className=\"d-flex align-items-center gap-2\">\r\n                <label className=\"form-label mb-0\" style={{ width: 120 }}>Від</label>\r\n                <input type=\"datetime-local\" className=\"form-control\" value={openFrom} onChange={(e) => setOpenFrom(e.target.value)} />\r\n              </div>\r\n              <div className=\"d-flex align-items-center gap-2\">\r\n                <label className=\"form-label mb-0\" style={{ width: 120 }}>До</label>\r\n                <input type=\"datetime-local\" className=\"form-control\" value={openTo} onChange={(e) => setOpenTo(e.target.value)} />\r\n              </div>\r\n              <div className=\"form-text\">Коли увімкнено — тест буде доступний лише в проміжку часу.</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"mb-3 questions-section\">\r\n          <h3 className=\"mb-2 text-center\">Питання</h3>\r\n          \r\n          {questions.length === 0 && (\r\n            <div className=\"muted mb-2\">Поки немає питань. Додайте перше питання.</div>\r\n          )}\r\n          {questions.map((q) => (\r\n            <div className=\"mb-3\" key={q.id}>\r\n              <div className=\"d-flex justify-content-between align-items-center mb-1\">\r\n                <label className=\"form-label mb-0\">Питання</label>\r\n                <div className=\"d-flex align-items-center gap-2\">\r\n                  <select\r\n                    className=\"form-select form-select-sm\"\r\n                    style={{ width: 200 }}\r\n                    value={q.type}\r\n                    onChange={(e) => updateQuestionType(q.id, e.target.value as any)}\r\n                  >\r\n                    <option value=\"single\">Одиночний вибір</option>\r\n                    <option value=\"multi\">Множинний вибір</option>\r\n                    <option value=\"sequence\">Порядок</option>\r\n                    <option value=\"open\">Відкрита відповідь</option>\r\n                    <option value=\"matching\">Відповідності</option>\r\n                  </select>\r\n                  <input\r\n                    type=\"number\"\r\n                    min={0}\r\n                    step={0.5}\r\n                    className=\"form-control form-control-sm\"\r\n                    style={{ width: 90 }}\r\n                    value={typeof q.points === \"number\" ? q.points : 1}\r\n                    onChange={(e) => updateQuestionPoints(q.id, Number(e.target.value || 0))}\r\n                    title=\"Бали за питання\"\r\n                  />\r\n                  <span className=\"badge bg-secondary text-capitalize\">{q.type}</span>\r\n                </div>\r\n              </div>\r\n              {q.type !== \"open\" && (\r\n                <>\r\n                  <textarea\r\n                    className={`form-control ${invalidField && invalidField.qid === q.id && invalidField.field === \"text\" ? \"is-invalid\" : \"\"}`}\r\n                    rows={3}\r\n                    value={q.text}\r\n                    data-qid={q.id}\r\n                    data-field=\"text\"\r\n                    onChange={(e) => updateQuestion(q.id, e.target.value)}\r\n                  />\r\n                  {invalidField && invalidField.qid === q.id && invalidField.field === \"text\" && (\r\n                    <div className=\"invalid-feedback d-block app-error\">{invalidField.message}</div>\r\n                  )}\r\n                  <div className=\"mt-2 d-flex align-items-center gap-2\">\r\n                    <div>\r\n                      <label className=\"form-label mb-1\">Зображення (опціонально)</label>\r\n                      <div className=\"d-flex gap-2 align-items-center\">\r\n                        <input\r\n                          type=\"file\"\r\n                          accept=\"image/*\"\r\n                          onChange={async (e) => {\r\n                            const f = e.target.files?.[0];\r\n                            if (!f) return;\r\n                            try {\r\n                              // if existing image present, delete it from cloud first\r\n                              if (q.imageUrl) {\r\n                                try {\r\n                                  await fetch(`/api/cloudinary/delete`, {\r\n                                    method: \"POST\",\r\n                                    headers: { \"Content-Type\": \"application/json\" },\r\n                                    body: JSON.stringify({ imageUrl: q.imageUrl }),\r\n                                  });\r\n                                } catch (err) {\r\n                                  console.warn(\"Failed to delete previous image:\", err);\r\n                                }\r\n                              }\r\n                              const url = await uploadToCloudinary(f);\r\n                              if (url) updateQuestionImage(q.id, url);\r\n                            } catch (err) {\r\n                              console.error(err);\r\n                              alert(\"Не вдалося завантажити зображення\");\r\n                            }\r\n                          }}\r\n                        />\r\n                        {q.imageUrl ? (\r\n                          <div style={{ maxWidth: 140 }}>\r\n                            <img src={q.imageUrl} alt=\"preview\" style={{ width: \"100%\", borderRadius: 8 }} />\r\n                            <div className=\"mt-1\">\r\n                              <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-sm btn-outline-danger\"\r\n                                onClick={async () => {\r\n                                  try {\r\n                                    if (q.imageUrl) {\r\n                                      const res = await fetch(`/api/cloudinary/delete`, {\r\n                                        method: \"POST\",\r\n                                        headers: { \"Content-Type\": \"application/json\" },\r\n                                        body: JSON.stringify({ imageUrl: q.imageUrl }),\r\n                                      });\r\n                                      if (!res.ok) {\r\n                                        const txt = await res.text().catch(() => undefined);\r\n                                        alert(\"Не вдалося видалити зображення на сервері: \" + (txt || res.status));\r\n                                        return;\r\n                                      }\r\n                                    }\r\n                                  } catch (err) {\r\n                                    console.warn(\"Failed to delete image on server:\", err);\r\n                                    alert(\"Не вдалося видалити зображення на сервері\");\r\n                                    return;\r\n                                  }\r\n                                  updateQuestionImage(q.id, null);\r\n                                }}\r\n                              >Видалити</button>\r\n                            </div>\r\n                          </div>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </>\r\n              )}\r\n              {q.type === \"open\" && (\r\n                <OpenAnswer\r\n                  qid={q.id}\r\n                  invalidField={invalidField}\r\n                  text={q.text}\r\n                  answers={(q.data && q.data.answers) || []}\r\n                  onChange={(v) => {\r\n                    updateQuestion(q.id, v.text);\r\n                    updateOpenAnswer(q.id, v.answers);\r\n                  }}\r\n                />\r\n              )}\r\n\r\n              {q.type === \"single\" && (\r\n                <SingleChoice\r\n                  q={q}\r\n                  qid={q.id}\r\n                  invalidField={invalidField}\r\n                  ensureOptions={ensureOptions}\r\n                  addOptionToQuestion={addOptionToQuestion}\r\n                  updateOptionText={updateOptionText}\r\n                  removeOption={removeOption}\r\n                  toggleOptionCorrect={toggleOptionCorrect}\r\n                />\r\n              )}\r\n\r\n              {q.type === \"multi\" && (\r\n                <MultiChoice\r\n                  q={q}\r\n                  qid={q.id}\r\n                  invalidField={invalidField}\r\n                  ensureOptions={ensureOptions}\r\n                  addOptionToQuestion={addOptionToQuestion}\r\n                  updateOptionText={updateOptionText}\r\n                  removeOption={removeOption}\r\n                  toggleOptionCorrect={toggleOptionCorrect}\r\n                />\r\n              )}\r\n\r\n              {q.type === \"sequence\" && (\r\n                <SequenceQuestion\r\n                  q={q}\r\n                  qid={q.id}\r\n                  invalidField={invalidField}\r\n                  addSequenceItem={addSequenceItem}\r\n                  updateSequenceItemText={updateSequenceItemText}\r\n                  updateSequenceItemOrder={updateSequenceItemOrder}\r\n                  removeSequenceItem={removeSequenceItem}\r\n                />\r\n              )}\r\n\r\n              {q.type === \"matching\" && (\r\n                <MatchingQuestion\r\n                  q={q}\r\n                  qid={q.id}\r\n                  invalidField={invalidField}\r\n                  addPairToQuestion={addPairToQuestion}\r\n                  updatePairText={updatePairText}\r\n                  removePairFromQuestion={removePairFromQuestion}\r\n                />\r\n              )}\r\n              <div className=\"mt-2 d-flex gap-2\">\r\n                <button type=\"button\" className=\"btn btn-outline-danger\" onClick={() => removeQuestion(q.id)}>\r\n                  Видалити питання\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          <div className=\"mb-2 d-flex justify-content-center align-items-center gap-2 mt-3\">\r\n            <select\r\n              className=\"form-select w-auto\"\r\n              value={newQuestionType}\r\n              onChange={(e) => setNewQuestionType(e.target.value as any)}\r\n            >\r\n              <option value=\"single\">Одиночний вибір</option>\r\n              <option value=\"multi\">Множинний вибір</option>\r\n              <option value=\"sequence\">Порядок (послідовність)</option>\r\n              <option value=\"open\">Відкрита відповідь</option>\r\n              <option value=\"matching\">Відповідності</option>\r\n            </select>\r\n            <button type=\"button\" className=\"btn btn-secondary\" onClick={() => addQuestion()}>\r\n              Додати питання\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {error && <div className=\"app-error mb-3\">{error}</div>}\r\n\r\n        {/* Removed manual restore UI and lastSaved display. Clear button moved to actions area below. */}\r\n\r\n        <div className=\"d-flex gap-2 actions-center\">\r\n          <button type=\"button\" className=\"btn btn-sm btn-outline-danger\" onClick={clearDraft}>\r\n            Очистити всі поля\r\n          </button>\r\n          <button className=\"btn btn-primary\" type=\"submit\" disabled={loading}>\r\n            {loading ? (editId ? \"Оновлюю...\" : \"Зберігаю...\") : (editId ? \"Оновити тест\" : \"Створити тест\")}\r\n          </button>\r\n          <Link href=\"/editor\" className=\"btn btn-outline-secondary\">\r\n            Назад\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\ntype Props = {\r\n  qid?: number;\r\n  invalidField?: { qid: number; field: string; idx?: number; message?: string } | null;\r\n  text?: string;\r\n  answers?: string[];\r\n  onChange?: (v: { text: string; answers: string[] }) => void;\r\n};\r\n\r\nexport default function OpenAnswer({ qid, invalidField, text = \"\", answers = [], onChange }: Props) {\r\n  function addAnswer() {\r\n    const next = [...answers, \"\"];\r\n    onChange && onChange({ text, answers: next });\r\n  }\r\n\r\n  function updateAnswer(idx: number, value: string) {\r\n    const next = answers.map((a, i) => (i === idx ? value : a));\r\n    onChange && onChange({ text, answers: next });\r\n  }\r\n\r\n  function removeAnswer(idx: number) {\r\n    const next = answers.filter((_, i) => i !== idx);\r\n    onChange && onChange({ text, answers: next });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"mb-3\">\r\n        <textarea\r\n          className={`form-control ${invalidField && invalidField.qid === (qid || 0) && invalidField.field === \"text\" ? \"is-invalid\" : \"\"}`}\r\n          rows={2}\r\n          value={text}\r\n          data-qid={qid}\r\n          data-field=\"text\"\r\n          onChange={(e) => onChange && onChange({ text: e.target.value, answers })}\r\n        />\r\n        {invalidField && invalidField.qid === (qid || 0) && invalidField.field === \"text\" && (\r\n          <div className=\"invalid-feedback d-block app-error\">{invalidField.message}</div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"mb-3\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n          <label className=\"form-label mb-0\">Очікувана відповідь</label>\r\n          <button type=\"button\" className=\"btn btn-sm btn-outline-secondary\" onClick={addAnswer}>\r\n            Додати відповідь\r\n          </button>\r\n        </div>\r\n        {answers.map((a, idx) => (\r\n          <div key={idx} className=\"d-flex gap-2 align-items-start mb-2\">\r\n            <input\r\n              className={`form-control ${invalidField && invalidField.qid === (qid || 0) && invalidField.field === \"answer\" && invalidField.idx === idx ? \"is-invalid\" : \"\"}`}\r\n              data-qid={qid}\r\n              data-field=\"answer\"\r\n              data-idx={idx}\r\n              value={a}\r\n              onChange={(e) => updateAnswer(idx, e.target.value)}\r\n            />\r\n            <button type=\"button\" className=\"btn btn-sm btn-outline-danger\" onClick={() => removeAnswer(idx)}>\r\n              Видалити\r\n            </button>\r\n            {invalidField && invalidField.qid === (qid || 0) && invalidField.field === \"answer\" && invalidField.idx === idx && (\r\n              <div className=\"invalid-feedback d-block app-error\">{invalidField.message}</div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n}","\"use client\";\r\nimport React from \"react\";\r\n\r\ntype Props = {\r\n  q: any;\r\n  qid?: number;\r\n  invalidField?: { qid: number; field: string; idx?: number; message?: string } | null;\r\n  ensureOptions: (id: number) => void;\r\n  addOptionToQuestion: (id: number) => void;\r\n  updateOptionText: (id: number, optionId: number, text: string) => void;\r\n  removeOption: (id: number, optionId: number) => void;\r\n  toggleOptionCorrect: (id: number, optionId: number) => void;\r\n};\r\n\r\nexport default function SingleChoice({ q, qid, invalidField, ensureOptions, addOptionToQuestion, updateOptionText, removeOption, toggleOptionCorrect, }: Props) {\r\n  return (\r\n    <div className=\"mt-3\">\r\n      <div className=\"d-flex gap-2 align-items-center mb-2\">\r\n        <strong className=\"mb-0\">Варіанти відповіді</strong>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-sm btn-outline-secondary\"\r\n          onClick={() => {\r\n            ensureOptions(q.id);\r\n            addOptionToQuestion(q.id);\r\n          }}\r\n        >\r\n          Додати варіант\r\n        </button>\r\n      </div>\r\n      {((q.data && q.data.options) || []).map((opt: any, idx: number) => (\r\n        <div key={opt.id} className=\"d-flex gap-2 align-items-start mb-2\">\r\n          <div style={{ marginTop: 6 }}>\r\n            <input\r\n              type=\"radio\"\r\n              name={`correct-${q.id}`}\r\n              checked={!!opt.correct}\r\n              onChange={() => toggleOptionCorrect(q.id, opt.id)}\r\n            />\r\n          </div>\r\n          <input\r\n            className={`form-control ${invalidField && invalidField.qid === (qid || q.id) && invalidField.field === \"option\" && (invalidField.idx === undefined || invalidField.idx === idx) ? \"is-invalid\" : \"\"}`}\r\n            data-qid={qid || q.id}\r\n            data-field=\"option\"\r\n            data-idx={idx}\r\n            value={opt.text}\r\n            onChange={(e) => updateOptionText(q.id, opt.id, e.target.value)}\r\n          />\r\n          {invalidField && invalidField.qid === (qid || q.id) && invalidField.field === \"option\" && (invalidField.idx === undefined || invalidField.idx === idx) && (\r\n            <div className=\"invalid-feedback d-block app-error\">{invalidField.message}</div>\r\n          )}\r\n          <button type=\"button\" className=\"btn btn-sm btn-outline-danger\" onClick={() => removeOption(q.id, opt.id)}>\r\n            Видалити\r\n          </button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\nimport React from \"react\";\r\n\r\ntype Props = {\r\n  q: any;\r\n  qid?: number;\r\n  invalidField?: { qid: number; field: string; idx?: number; message?: string } | null;\r\n  ensureOptions: (id: number) => void;\r\n  addOptionToQuestion: (id: number) => void;\r\n  updateOptionText: (id: number, optionId: number, text: string) => void;\r\n  removeOption: (id: number, optionId: number) => void;\r\n  toggleOptionCorrect: (id: number, optionId: number) => void;\r\n};\r\n\r\nexport default function MultiChoice({ q, qid, invalidField, ensureOptions, addOptionToQuestion, updateOptionText, removeOption, toggleOptionCorrect, }: Props) {\r\n  return (\r\n    <div className=\"mt-3\">\r\n      <div className=\"d-flex gap-2 align-items-center mb-2\">\r\n        <strong className=\"mb-0\">Варіанти відповіді</strong>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-sm btn-outline-secondary\"\r\n          onClick={() => {\r\n            ensureOptions(q.id);\r\n            addOptionToQuestion(q.id);\r\n          }}\r\n        >\r\n          Додати варіант\r\n        </button>\r\n      </div>\r\n      {((q.data && q.data.options) || []).map((opt: any, idx: number) => (\r\n        <div key={opt.id} className=\"d-flex gap-2 align-items-start mb-2\">\r\n          <div style={{ marginTop: 6 }}>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={!!opt.correct}\r\n              onChange={() => toggleOptionCorrect(q.id, opt.id)}\r\n            />\r\n          </div>\r\n          <input\r\n            className={`form-control ${invalidField && invalidField.qid === (qid || q.id) && invalidField.field === \"option\" && (invalidField.idx === undefined || invalidField.idx === idx) ? \"is-invalid\" : \"\"}`}\r\n            data-qid={qid || q.id}\r\n            data-field=\"option\"\r\n            data-idx={idx}\r\n            value={opt.text}\r\n            onChange={(e) => updateOptionText(q.id, opt.id, e.target.value)}\r\n          />\r\n          {invalidField && invalidField.qid === (qid || q.id) && invalidField.field === \"option\" && (invalidField.idx === undefined || invalidField.idx === idx) && (\r\n            <div className=\"invalid-feedback d-block app-error\">{invalidField.message}</div>\r\n          )}\r\n          <button type=\"button\" className=\"btn btn-sm btn-outline-danger\" onClick={() => removeOption(q.id, opt.id)}>\r\n            Видалити\r\n          </button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\nimport React from \"react\";\r\n\r\ntype Props = {\r\n  q: any;\r\n  qid?: number;\r\n  invalidField?: { qid: number; field: string; idx?: number; message?: string } | null;\r\n  addSequenceItem: (id: number) => void;\r\n  updateSequenceItemText: (id: number, itemId: number, text: string) => void;\r\n  updateSequenceItemOrder: (id: number, itemId: number, order: number) => void;\r\n  removeSequenceItem: (id: number, itemId: number) => void;\r\n};\r\n\r\nexport default function SequenceQuestion({ q, qid, invalidField, addSequenceItem, updateSequenceItemText, updateSequenceItemOrder, removeSequenceItem, }: Props) {\r\n  return (\r\n    <div className=\"mt-3\">\r\n      <div className=\"d-flex gap-2 align-items-center mb-2\">\r\n        <strong className=\"mb-0\">Елементи</strong>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-sm btn-outline-secondary\"\r\n          onClick={() => addSequenceItem(q.id)}\r\n        >\r\n          Додати елемент\r\n        </button>\r\n      </div>\r\n      {(((q.data && q.data.options) || []) as any)\r\n        .slice()\r\n        .sort((a: any, b: any) => (Number(a.order) || 0) - (Number(b.order) || 0))\r\n        .map((it: any, idx: number) => (\r\n          <div key={it.id} className=\"d-flex gap-2 align-items-start mb-2\">\r\n            <div className={`form-control`} style={{ width: 90, display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\r\n              {Number(it.order) || idx + 1}\r\n            </div>\r\n            <input\r\n              className={`form-control ${invalidField && invalidField.qid === (qid || q.id) && invalidField.field === \"sequence\" && invalidField.idx === idx ? \"is-invalid\" : \"\"}`}\r\n              data-qid={q.id}\r\n              data-field=\"sequence\"\r\n              data-idx={idx}\r\n              value={it.text}\r\n              onChange={(e) => updateSequenceItemText(q.id, it.id, e.target.value)}\r\n            />\r\n            {invalidField && invalidField.qid === (qid || q.id) && invalidField.field === \"sequence\" && invalidField.idx === idx && (\r\n              <div className=\"invalid-feedback d-block app-error\">{invalidField.message}</div>\r\n            )}\r\n            <button type=\"button\" className=\"btn btn-sm btn-outline-danger\" onClick={() => removeSequenceItem(q.id, it.id)}>\r\n              Видалити\r\n            </button>\r\n          </div>\r\n        ))}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\nimport React from \"react\";\r\n\r\ntype Props = {\r\n  q: any;\r\n  qid?: number;\r\n  invalidField?: { qid: number; field: string; idx?: number; message?: string } | null;\r\n  addPairToQuestion: (id: number) => void;\r\n  updatePairText: (id: number, pairId: number, side: \"left\" | \"right\", value: string) => void;\r\n  removePairFromQuestion: (id: number, pairId: number) => void;\r\n};\r\n\r\nexport default function MatchingQuestion({ q, qid, invalidField, addPairToQuestion, updatePairText, removePairFromQuestion, }: Props) {\r\n  return (\r\n    <div className=\"mt-3\">\r\n      <div className=\"d-flex gap-2 align-items-center mb-2\">\r\n        <strong className=\"mb-0\">Пари відповідностей</strong>\r\n        <button type=\"button\" className=\"btn btn-sm btn-outline-secondary\" onClick={() => addPairToQuestion(q.id)}>\r\n          Додати пару\r\n        </button>\r\n      </div>\r\n      {((q.data && q.data.pairs) || []).map((p: any, idx: number) => (\r\n        <div key={p.id} className=\"d-flex gap-2 align-items-start mb-2\">\r\n          <input\r\n            className={`form-control ${invalidField && invalidField.qid === (qid || q.id) && invalidField.field === \"pair\" && invalidField.idx === idx ? \"is-invalid\" : \"\"}`}\r\n            data-qid={q.id}\r\n            data-field=\"pair\"\r\n            data-idx={idx}\r\n            value={p.left}\r\n            onChange={(e) => updatePairText(q.id, p.id, \"left\", e.target.value)}\r\n            placeholder=\"Ліва\"\r\n          />\r\n          <span className=\"align-self-center\">→</span>\r\n          <input\r\n            className={`form-control ${invalidField && invalidField.qid === (qid || q.id) && invalidField.field === \"pair\" && invalidField.idx === idx ? \"is-invalid\" : \"\"}`}\r\n            data-qid={q.id}\r\n            data-field=\"pair\"\r\n            data-idx={idx}\r\n            value={p.right}\r\n            onChange={(e) => updatePairText(q.id, p.id, \"right\", e.target.value)}\r\n            placeholder=\"Права\"\r\n          />\r\n          {invalidField && invalidField.qid === (qid || q.id) && invalidField.field === \"pair\" && invalidField.idx === idx && (\r\n            <div className=\"invalid-feedback d-block app-error\">{invalidField.message}</div>\r\n          )}\r\n          <button type=\"button\" className=\"btn btn-sm btn-outline-danger\" onClick={() => removePairFromQuestion(q.id, p.id)}>\r\n            Видалити\r\n          </button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}