module.exports=[79698,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(1),[p,q]=(0,c.useState)(1);return(0,c.useEffect)(()=>{let a=!0;return async function(){try{let b=await fetch(`/api/tests?page=${n}&limit=10`,{credentials:"include"});if(!b.ok)return;let c=await b.json();a&&c?.ok&&Array.isArray(c.tests)&&(e(c.tests.map(a=>({_id:a._id||a.id||a._id,title:a.title,description:a.description,storeResponses:!!a.storeResponses}))),q(c.totalPages||1))}catch(a){console.warn("Failed to load tests:",a)}finally{a&&i(!1)}}(),()=>{a=!1}},[]),(0,c.useEffect)(()=>{try{document.title="TestHub | Редактор тестів"}catch{}},[]),(0,b.jsxs)("div",{className:"container d-flex flex-column align-items-center justify-content-center min-vh-100",children:[(0,b.jsx)("h2",{className:"mb-4 text-center",children:"Редактор тестів"}),(0,b.jsxs)("div",{className:"menu-box d-flex flex-column gap-2",children:[(0,b.jsx)(d.default,{href:"/editor/new",className:"btn btn-primary w-100",children:"Додати новий тест"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)("input",{className:"form-control",placeholder:"Пошук за назвою тесту...",value:f,onChange:a=>{g(a.target.value),o(1)}})}),(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)("h3",{className:"h6",children:"Мої тести"}),h?(0,b.jsx)("div",{className:"text-muted",children:"Завантаження..."}):0===a.length?(0,b.jsx)("div",{className:"text-muted",children:"У вас ще немає створених тестів."}):(0,b.jsx)("div",{className:"list-group transparent-list",children:a.filter(a=>a.title.toLowerCase().includes(f.toLowerCase())).map(a=>(0,b.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"fw-semibold",children:a.title}),a.description?(0,b.jsx)("div",{className:"text-muted small",children:a.description}):null]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(d.default,{href:`/editor/new?edit=${a._id}`,className:"btn btn-sm btn-outline-primary",children:"Редагувати"}),a.storeResponses?(0,b.jsx)(d.default,{href:`/editor/attempts/${a._id}`,className:"btn btn-sm btn-outline-secondary ms-2",children:"Проходження"}):null,(0,b.jsx)("button",{className:"btn btn-sm btn-outline-danger ms-2",onClick:async()=>{try{if(!confirm("Видалити тест? Цю дію не можна відмінити."))return;k(a._id);let b=await fetch(`/api/tests/${a._id}`,{method:"DELETE",credentials:"include"});if(!b.ok){let a=await b.text();throw Error(a||`HTTP ${b.status}`)}e(b=>b.filter(b=>b._id!==a._id))}catch(a){console.warn("Failed to delete test:",a),alert("Не вдалося видалити тест")}finally{k(null)}},disabled:j===a._id,children:j===a._id?"Видаляю...":"Видалити"}),(0,b.jsx)("button",{className:"btn btn-sm btn-outline-success ms-2",onClick:async()=>{try{let b=a._id;if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(b);else{let a=document.createElement("input");document.body.appendChild(a),a.value=b,a.select(),document.execCommand("copy"),document.body.removeChild(a)}m(a._id),setTimeout(()=>m(null),2500)}catch(a){console.warn("Failed to copy id:",a),alert("Не вдалося скопіювати код тесту")}},children:l===a._id?"Скопійовано!":"Поділитись"})]})]},a._id))}),(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,b.jsx)("button",{className:"btn btn-outline-secondary",disabled:n<=1,onClick:()=>o(a=>Math.max(1,a-1)),children:"Назад"}),(0,b.jsxs)("div",{children:["Сторінка ",n," / ",p]}),(0,b.jsx)("button",{className:"btn btn-outline-secondary",disabled:n>=p,onClick:()=>o(a=>Math.min(p,a+1)),children:"Далі"})]})]})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_editor_page_tsx_b89e3172._.js.map