module.exports=[32978,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);function e(){let[a,e]=(0,c.useState)(!0),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(1),[r,s]=(0,c.useState)(1),[t,u]=(0,c.useState)(null);return(0,c.useEffect)(()=>{let a=!0;return async function(){e(!0);try{let b="/api/attempts/me",c=[];h&&c.push(`test=${encodeURIComponent(h)}`),n&&c.push(`author=${encodeURIComponent(n)}`),j&&c.push(`from=${encodeURIComponent(j)}`),l&&c.push(`to=${encodeURIComponent(l)}`),c.push(`page=${p}`),c.push("limit=10"),c.length&&(b+=`?${c.join("&")}`);let d=await fetch(b,{credentials:"include"});if(!d.ok){let a=await d.text().catch(()=>void 0);u(a||`HTTP ${d.status}`);return}let e=await d.json();a&&e?.ok&&(g(e.attempts||[]),s(e.totalPages||1))}catch(a){console.warn(a),u("Не вдалося завантажити історію проходжень")}finally{a&&e(!1)}}(),()=>{a=!1}},[h,j,l,p]),(0,b.jsxs)("div",{className:"container d-flex flex-column align-items-center min-vh-100",children:[(0,b.jsx)("h2",{className:"mb-3",children:"Історія тестувань"}),(0,b.jsxs)("div",{className:"menu-box w-100",children:[(0,b.jsxs)("div",{className:"d-flex gap-2 mb-3",children:[(0,b.jsx)("input",{className:"form-control",placeholder:"Пошук за назвою тесту",value:h,onChange:a=>{i(a.target.value),q(1)}}),(0,b.jsx)("input",{className:"form-control",placeholder:"Пошук за автором",value:n,onChange:a=>{o(a.target.value),q(1)}}),(0,b.jsx)("input",{className:"form-control",type:"date",value:j,onChange:a=>{k(a.target.value),q(1)},placeholder:"Від"}),(0,b.jsx)("input",{className:"form-control",type:"date",value:l,onChange:a=>{m(a.target.value),q(1)},placeholder:"До"}),(0,b.jsx)(d.default,{href:"/",className:"btn btn-outline-secondary",children:"Назад"})]}),a?(0,b.jsx)("div",{className:"text-muted",children:"Завантаження..."}):t?(0,b.jsx)("div",{className:"text-danger",children:t}):0===f.length?(0,b.jsx)("div",{className:"text-muted",children:"Ви ще нічого не проходили."}):(0,b.jsx)("div",{className:"list-group",children:f.map(a=>a.details&&a.details.perQuestion?(0,b.jsx)(d.default,{href:`/history/${a.id}`,className:"list-group-item list-group-item-action text-decoration-none",children:(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"fw-semibold",children:a.title}),(0,b.jsx)("div",{className:"text-muted small",children:new Date(a.createdAt).toLocaleString()})]}),(0,b.jsx)("div",{className:"text-end",children:(0,b.jsx)("div",{className:"fw-semibold",children:void 0!==a.details.totalScore?`${a.details.totalScore} / ${a.details.totalPossible}`:""})})]})},a.id):(0,b.jsx)("div",{className:"list-group-item",children:(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"fw-semibold",children:a.title}),(0,b.jsx)("div",{className:"text-muted small",children:new Date(a.createdAt).toLocaleString()})]}),(0,b.jsx)("div",{className:"text-end",children:a.details&&void 0!==a.details.totalScore?(0,b.jsxs)("div",{className:"fw-semibold",children:[a.details.totalScore," / ",a.details.totalPossible]}):(0,b.jsx)("div",{className:"text-muted",children:"Деталі заборонено"})})]})},a.id))}),(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,b.jsx)("button",{className:"btn btn-outline-secondary",disabled:p<=1,onClick:()=>q(a=>Math.max(1,a-1)),children:"Назад"}),(0,b.jsxs)("div",{children:["Сторінка ",p," / ",r]}),(0,b.jsx)("button",{className:"btn btn-outline-secondary",disabled:p>=r,onClick:()=>q(a=>Math.min(r,a+1)),children:"Далі"})]})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_history_page_tsx_993a6575._.js.map