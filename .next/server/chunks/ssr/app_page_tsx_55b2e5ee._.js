module.exports=[60350,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(50944);function f(){let[a,f]=(0,d.useState)(null),[g,h]=(0,d.useState)(!0),i=(0,e.useRouter)(),[j,k]=(0,d.useState)(!1);async function l(){try{let a=await fetch("/api/me",{credentials:"include"});if(a.ok){let b=await a.json();f(b?.user??null)}else f(null)}catch(a){console.error("Home /api/me error:",a),f(null)}finally{h(!1)}}(0,d.useEffect)(()=>{l();let a=a=>{"auth-refresh"===a.key&&l()};window.addEventListener?.("storage",a);let b=()=>l();return window.addEventListener?.("auth-refresh",b),()=>{window.removeEventListener?.("storage",a),window.removeEventListener?.("auth-refresh",b)}},[]),(0,d.useEffect)(()=>{try{k(!1)}catch{k(!1)}let a=a=>{if("test_draft_v1"===a.key)try{k(!!a.newValue)}catch{k(!1)}};return window.addEventListener?.("storage",a),()=>{window.removeEventListener?.("storage",a)}},[]),(0,d.useEffect)(()=>{try{document.title="TestHub | Головна сторінка"}catch{}},[]);let m=!!a;async function n(){try{let a=await fetch("/api/logout",{method:"POST",credentials:"include"});f(null);try{localStorage.setItem("auth-refresh",String(Date.now()))}catch{}try{window.dispatchEvent(new Event("auth-refresh"))}catch{}try{i.refresh()}catch{}a.ok||console.warn("Logout failed",await a.text())}catch(a){console.error("Logout error:",a)}}return a?.username,(0,b.jsxs)("div",{className:"container d-flex flex-column align-items-center justify-content-center min-vh-100 home-menu",children:[(0,b.jsx)("div",{className:"mb-4 text-center",children:(0,b.jsx)("h1",{className:"display-5 fw-semibold",children:"TestHub"})}),(0,b.jsxs)("div",{className:"card p-4 shadow-sm text-center app-card menu-box",children:[(0,b.jsx)(c.default,{href:"/tests",className:"btn btn-outline-dark w-100 mb-2",children:"Список публічних тестів"}),(0,b.jsx)(c.default,{href:"/run",className:"btn btn-outline-dark w-100 mb-2",children:"Пройти тест за кодом"}),m&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.default,{href:"/history",className:"btn btn-outline-dark w-100 mb-2",children:"Історія тестувань"}),(0,b.jsx)(c.default,{href:"/editor",className:"btn btn-outline-dark w-100 mb-2",children:"Мої тести"})]}),!m&&(0,b.jsx)("p",{className:"text-muted mt-3 mb-0",children:"Увійди, щоб отримати більше можливостей"})]}),(0,b.jsx)("div",{className:"d-flex gap-2 mt-3",children:m?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("button",{onClick:n,className:"btn btn-danger",children:"Вийти"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.default,{href:"/login",className:"btn btn-primary",children:"Увійти"}),(0,b.jsx)(c.default,{href:"/register",className:"btn btn-outline-primary",children:"Зареєструватись"})]})})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_page_tsx_55b2e5ee._.js.map