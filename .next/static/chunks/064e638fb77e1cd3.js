(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40104,e=>{"use strict";var t=e.i(43476),s=e.i(71645),i=e.i(22016);function l(){let[e,l]=(0,s.useState)([]),[n,a]=(0,s.useState)(""),[c,d]=(0,s.useState)(!0),[r,o]=(0,s.useState)(null),[m,u]=(0,s.useState)(null),[h,x]=(0,s.useState)(1),[b,f]=(0,s.useState)(1);return(0,s.useEffect)(()=>{let e=!0;return async function(){try{let t=await fetch(`/api/tests?page=${h}&limit=10`,{credentials:"include"});if(!t.ok)return;let s=await t.json();e&&s?.ok&&Array.isArray(s.tests)&&(l(s.tests.map(e=>({_id:e._id||e.id||e._id,title:e.title,description:e.description,storeResponses:!!e.storeResponses}))),f(s.totalPages||1))}catch(e){console.warn("Failed to load tests:",e)}finally{e&&d(!1)}}(),()=>{e=!1}},[]),(0,s.useEffect)(()=>{try{document.title="TestHub | Редактор тестів"}catch{}},[]),(0,t.jsxs)("div",{className:"container d-flex flex-column align-items-center justify-content-center min-vh-100",children:[(0,t.jsx)("h2",{className:"mb-4 text-center",children:"Редактор тестів"}),(0,t.jsxs)("div",{className:"menu-box d-flex flex-column gap-2",children:[(0,t.jsx)(i.default,{href:"/editor/new",className:"btn btn-primary w-100",children:"Додати новий тест"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{className:"form-control",placeholder:"Пошук за назвою тесту...",value:n,onChange:e=>{a(e.target.value),x(1)}})}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("h3",{className:"h6",children:"Мої тести"}),c?(0,t.jsx)("div",{className:"text-muted",children:"Завантаження..."}):0===e.length?(0,t.jsx)("div",{className:"text-muted",children:"У вас ще немає створених тестів."}):(0,t.jsx)("div",{className:"list-group transparent-list",children:e.filter(e=>e.title.toLowerCase().includes(n.toLowerCase())).map(e=>(0,t.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"fw-semibold",children:e.title}),e.description?(0,t.jsx)("div",{className:"text-muted small",children:e.description}):null]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.default,{href:`/editor/new?edit=${e._id}`,className:"btn btn-sm btn-outline-primary",children:"Редагувати"}),e.storeResponses?(0,t.jsx)(i.default,{href:`/editor/attempts/${e._id}`,className:"btn btn-sm btn-outline-secondary ms-2",children:"Проходження"}):null,(0,t.jsx)("button",{className:"btn btn-sm btn-outline-danger ms-2",onClick:async()=>{try{if(!confirm("Видалити тест? Цю дію не можна відмінити."))return;o(e._id);let t=await fetch(`/api/tests/${e._id}`,{method:"DELETE",credentials:"include"});if(!t.ok){let e=await t.text();throw Error(e||`HTTP ${t.status}`)}l(t=>t.filter(t=>t._id!==e._id))}catch(e){console.warn("Failed to delete test:",e),alert("Не вдалося видалити тест")}finally{o(null)}},disabled:r===e._id,children:r===e._id?"Видаляю...":"Видалити"}),(0,t.jsx)("button",{className:"btn btn-sm btn-outline-success ms-2",onClick:async()=>{try{let t=e._id;if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(t);else{let e=document.createElement("input");document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e)}u(e._id),setTimeout(()=>u(null),2500)}catch(e){console.warn("Failed to copy id:",e),alert("Не вдалося скопіювати код тесту")}},children:m===e._id?"Скопійовано!":"Поділитись"})]})]},e._id))}),(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,t.jsx)("button",{className:"btn btn-outline-secondary",disabled:h<=1,onClick:()=>x(e=>Math.max(1,e-1)),children:"Назад"}),(0,t.jsxs)("div",{children:["Сторінка ",h," / ",b]}),(0,t.jsx)("button",{className:"btn btn-outline-secondary",disabled:h>=b,onClick:()=>x(e=>Math.min(b,e+1)),children:"Далі"})]})]})]})]})}e.s(["default",()=>l])}]);