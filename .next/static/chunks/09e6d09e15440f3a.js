(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72637,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(22016);function l(){let e=(0,s.useRouter)(),[l,n]=(0,a.useState)(""),[i,c]=(0,a.useState)(""),[o,m]=(0,a.useState)(""),[u,d]=(0,a.useState)(""),[h,f]=(0,a.useState)(!1),[p,x]=(0,a.useState)(null);async function b(t){if(t.preventDefault(),x(null),!l||!i||!o||!u)return void x("Заповніть усі поля");if(o!==u)return void x("Паролі не співпадають");f(!0);try{let t=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:l,username:i,password:o})}),a=null;try{a=await t.json()}catch(e){try{a={error:await t.text()||`HTTP ${t.status}`}}catch{a={error:`HTTP ${t.status}`}}}if(a?.warning&&console.warn("Register warning:",a.warning),!t.ok){x(a?.error||a?.message||"Помилка реєстрації"),f(!1);return}try{localStorage.setItem("auth-refresh",String(Date.now()));try{window.dispatchEvent(new Event("auth-refresh"))}catch{}}catch{}try{await e.refresh()}catch{}e.push("/")}catch(e){console.error(e),x(e?.message||"Помилка мережі"),f(!1)}}return(0,a.useEffect)(()=>{try{document.title="TestHub | Реєстрація"}catch{}},[]),(0,t.jsx)("div",{className:"container d-flex flex-column align-items-center justify-content-center min-vh-100",children:(0,t.jsxs)("div",{className:"register-container menu-box",children:[(0,t.jsx)("h2",{className:"mb-4 text-center",children:"Реєстрація"}),(0,t.jsxs)("form",{onSubmit:b,children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),(0,t.jsx)("input",{id:"email",type:"email",className:"form-control",value:l,onChange:e=>n(e.target.value),autoComplete:"email"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"username",className:"form-label",children:"Ім'я користувача"}),(0,t.jsx)("input",{id:"username",type:"text",className:"form-control",value:i,onChange:e=>c(e.target.value),autoComplete:"username"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"password",className:"form-label",children:"Пароль"}),(0,t.jsx)("input",{id:"password",type:"password",className:"form-control",value:o,onChange:e=>m(e.target.value),autoComplete:"new-password"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"confirm",className:"form-label",children:"Підтвердження пароля"}),(0,t.jsx)("input",{id:"confirm",type:"password",className:"form-control",value:u,onChange:e=>d(e.target.value),autoComplete:"new-password"})]}),p&&(0,t.jsx)("div",{className:"text-danger mb-3",children:p}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary w-100",disabled:h,children:h?"Зачекайте...":"Зареєструватись"}),(0,t.jsxs)("p",{className:"text-center mt-3 mb-0",children:["Вже маєш акаунт? ",(0,t.jsx)(r.default,{href:"/login",className:"text-decoration-underline",children:"Увійти"})]})]})]})})}e.s(["default",()=>l])}]);