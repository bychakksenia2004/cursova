(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74290,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(22016);function i(){let e=(0,a.useParams)(),i=e?.id;(0,a.useRouter)();let[n,c]=(0,s.useState)(!0),[d,r]=(0,s.useState)([]),[o,u]=(0,s.useState)(""),[m,h]=(0,s.useState)(null),[x,j]=(0,s.useState)(1),[f,b]=(0,s.useState)(1);return(0,s.useEffect)(()=>{let e=!0;return async function(){if(i){c(!0);try{let t=`/api/attempts/${i}`,s=[];o&&s.push(`user=${encodeURIComponent(o)}`),s.push(`page=${x}`),s.push("limit=10"),s.length&&(t+=`?${s.join("&")}`);let a=await fetch(t,{credentials:"include"});if(!a.ok){let e=await a.text().catch(()=>void 0);h(e||`HTTP ${a.status}`);return}let l=await a.json();e&&l?.ok&&(r(l.attempts||[]),b(l.totalPages||1))}catch(e){console.warn(e),h("Не вдалося завантажити проходження")}finally{e&&c(!1)}}}(),()=>{e=!1}},[i,o,x]),(0,t.jsxs)("div",{className:"container d-flex flex-column align-items-center min-vh-100",children:[(0,t.jsx)("h2",{className:"mb-3",children:"Проходження тесту"}),(0,t.jsxs)("div",{className:"menu-box w-100",children:[(0,t.jsxs)("div",{className:"d-flex gap-2 mb-3",children:[(0,t.jsx)("input",{className:"form-control",placeholder:"Пошук за ім'ям користувача",value:o,onChange:e=>{u(e.target.value),j(1)}}),(0,t.jsx)(l.default,{href:"/editor",className:"btn btn-outline-secondary",children:"Назад"})]}),n?(0,t.jsx)("div",{className:"text-muted",children:"Завантаження..."}):m?(0,t.jsx)("div",{className:"text-danger",children:m}):0===d.length?(0,t.jsx)("div",{className:"text-muted",children:"Поки немає проходжень."}):(0,t.jsx)("div",{className:"list-group",children:d.map(e=>(0,t.jsxs)(l.default,{href:`/history/${e.id}`,className:"list-group-item list-group-item-action text-decoration-none d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"fw-semibold",children:e.username||"Анонім"}),(0,t.jsx)("div",{className:"text-muted small",children:new Date(e.createdAt).toLocaleString()})]}),(0,t.jsx)("div",{className:"text-end",children:(0,t.jsxs)("div",{className:"fw-semibold",children:[e.totalScore," / ",e.totalPossible]})})]},e.id))}),(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,t.jsx)("button",{className:"btn btn-outline-secondary",disabled:x<=1,onClick:()=>j(e=>Math.max(1,e-1)),children:"Назад"}),(0,t.jsxs)("div",{children:["Сторінка ",x," / ",f]}),(0,t.jsx)("button",{className:"btn btn-outline-secondary",disabled:x>=f,onClick:()=>j(e=>Math.min(f,e+1)),children:"Далі"})]})]})]})}e.s(["default",()=>i])}]);