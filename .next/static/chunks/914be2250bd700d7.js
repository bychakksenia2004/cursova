(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40801,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(22016);function l(){let[e,l]=(0,s.useState)(!0),[i,n]=(0,s.useState)([]),[d,c]=(0,s.useState)(""),[o,r]=(0,s.useState)(""),[m,u]=(0,s.useState)(""),[h,x]=(0,s.useState)(""),[j,v]=(0,s.useState)(1),[p,f]=(0,s.useState)(1),[N,g]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=!0;return async function(){l(!0);try{let t="/api/attempts/me",s=[];d&&s.push(`test=${encodeURIComponent(d)}`),h&&s.push(`author=${encodeURIComponent(h)}`),o&&s.push(`from=${encodeURIComponent(o)}`),m&&s.push(`to=${encodeURIComponent(m)}`),s.push(`page=${j}`),s.push("limit=10"),s.length&&(t+=`?${s.join("&")}`);let a=await fetch(t,{credentials:"include"});if(!a.ok){let e=await a.text().catch(()=>void 0);g(e||`HTTP ${a.status}`);return}let l=await a.json();e&&l?.ok&&(n(l.attempts||[]),f(l.totalPages||1))}catch(e){console.warn(e),g("Не вдалося завантажити історію проходжень")}finally{e&&l(!1)}}(),()=>{e=!1}},[d,o,m,j]),(0,t.jsxs)("div",{className:"container d-flex flex-column align-items-center min-vh-100",children:[(0,t.jsx)("h2",{className:"mb-3",children:"Історія тестувань"}),(0,t.jsxs)("div",{className:"menu-box w-100",children:[(0,t.jsxs)("div",{className:"d-flex gap-2 mb-3",children:[(0,t.jsx)("input",{className:"form-control",placeholder:"Пошук за назвою тесту",value:d,onChange:e=>{c(e.target.value),v(1)}}),(0,t.jsx)("input",{className:"form-control",placeholder:"Пошук за автором",value:h,onChange:e=>{x(e.target.value),v(1)}}),(0,t.jsx)("input",{className:"form-control",type:"date",value:o,onChange:e=>{r(e.target.value),v(1)},placeholder:"Від"}),(0,t.jsx)("input",{className:"form-control",type:"date",value:m,onChange:e=>{u(e.target.value),v(1)},placeholder:"До"}),(0,t.jsx)(a.default,{href:"/",className:"btn btn-outline-secondary",children:"Назад"})]}),e?(0,t.jsx)("div",{className:"text-muted",children:"Завантаження..."}):N?(0,t.jsx)("div",{className:"text-danger",children:N}):0===i.length?(0,t.jsx)("div",{className:"text-muted",children:"Ви ще нічого не проходили."}):(0,t.jsx)("div",{className:"list-group",children:i.map(e=>e.details&&e.details.perQuestion?(0,t.jsx)(a.default,{href:`/history/${e.id}`,className:"list-group-item list-group-item-action text-decoration-none",children:(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"fw-semibold",children:e.title}),(0,t.jsx)("div",{className:"text-muted small",children:new Date(e.createdAt).toLocaleString()})]}),(0,t.jsx)("div",{className:"text-end",children:(0,t.jsx)("div",{className:"fw-semibold",children:void 0!==e.details.totalScore?`${e.details.totalScore} / ${e.details.totalPossible}`:""})})]})},e.id):(0,t.jsx)("div",{className:"list-group-item",children:(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"fw-semibold",children:e.title}),(0,t.jsx)("div",{className:"text-muted small",children:new Date(e.createdAt).toLocaleString()})]}),(0,t.jsx)("div",{className:"text-end",children:e.details&&void 0!==e.details.totalScore?(0,t.jsxs)("div",{className:"fw-semibold",children:[e.details.totalScore," / ",e.details.totalPossible]}):(0,t.jsx)("div",{className:"text-muted",children:"Деталі заборонено"})})]})},e.id))}),(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,t.jsx)("button",{className:"btn btn-outline-secondary",disabled:j<=1,onClick:()=>v(e=>Math.max(1,e-1)),children:"Назад"}),(0,t.jsxs)("div",{children:["Сторінка ",j," / ",p]}),(0,t.jsx)("button",{className:"btn btn-outline-secondary",disabled:j>=p,onClick:()=>v(e=>Math.min(p,e+1)),children:"Далі"})]})]})]})}e.s(["default",()=>l])}]);