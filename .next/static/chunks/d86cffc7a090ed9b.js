(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),r=e.i(22016),n=e.i(71645),a=e.i(18566);function s(){let[e,s]=(0,n.useState)(null),[l,i]=(0,n.useState)(!0),c=(0,a.useRouter)(),[o,d]=(0,n.useState)(!1);async function u(){try{let e=await fetch("/api/me",{credentials:"include"});if(e.ok){let t=await e.json();s(t?.user??null)}else s(null)}catch(e){console.error("Home /api/me error:",e),s(null)}finally{i(!1)}}(0,n.useEffect)(()=>{u();let e=e=>{"auth-refresh"===e.key&&u()};window.addEventListener?.("storage",e);let t=()=>u();return window.addEventListener?.("auth-refresh",t),()=>{window.removeEventListener?.("storage",e),window.removeEventListener?.("auth-refresh",t)}},[]),(0,n.useEffect)(()=>{try{let e=window.localStorage.getItem("test_draft_v1");d(!!e)}catch{d(!1)}let e=e=>{if("test_draft_v1"===e.key)try{d(!!e.newValue)}catch{d(!1)}};return window.addEventListener?.("storage",e),()=>{window.removeEventListener?.("storage",e)}},[]),(0,n.useEffect)(()=>{try{document.title="TestHub | Головна сторінка"}catch{}},[]);let h=!!e;async function m(){try{let e=await fetch("/api/logout",{method:"POST",credentials:"include"});s(null);try{localStorage.setItem("auth-refresh",String(Date.now()))}catch{}try{window.dispatchEvent(new Event("auth-refresh"))}catch{}try{c.refresh()}catch{}e.ok||console.warn("Logout failed",await e.text())}catch(e){console.error("Logout error:",e)}}return e?.username,(0,t.jsxs)("div",{className:"container d-flex flex-column align-items-center justify-content-center min-vh-100 home-menu",children:[(0,t.jsx)("div",{className:"mb-4 text-center",children:(0,t.jsx)("h1",{className:"display-5 fw-semibold",children:"TestHub"})}),(0,t.jsxs)("div",{className:"card p-4 shadow-sm text-center app-card menu-box",children:[(0,t.jsx)(r.default,{href:"/tests",className:"btn btn-outline-dark w-100 mb-2",children:"Список публічних тестів"}),(0,t.jsx)(r.default,{href:"/run",className:"btn btn-outline-dark w-100 mb-2",children:"Пройти тест за кодом"}),h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.default,{href:"/history",className:"btn btn-outline-dark w-100 mb-2",children:"Історія тестувань"}),(0,t.jsx)(r.default,{href:"/editor",className:"btn btn-outline-dark w-100 mb-2",children:"Мої тести"})]}),!h&&(0,t.jsx)("p",{className:"text-muted mt-3 mb-0",children:"Увійди, щоб отримати більше можливостей"})]}),(0,t.jsx)("div",{className:"d-flex gap-2 mt-3",children:h?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("button",{onClick:m,className:"btn btn-danger",children:"Вийти"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.default,{href:"/login",className:"btn btn-primary",children:"Увійти"}),(0,t.jsx)(r.default,{href:"/register",className:"btn btn-outline-primary",children:"Зареєструватись"})]})})]})}e.s(["default",()=>s])}]);